var I="top",W="bottom",j="right",N="left",ht="auto",be=[I,W,j,N],me="start",Ce="end",nr="clippingParents",yt="viewport",We="popper",ir="reference",Lt=be.reduce(function(e,t){return e.concat([t+"-"+me,t+"-"+Ce])},[]),bt=[].concat(be,[ht]).reduce(function(e,t){return e.concat([t,t+"-"+me,t+"-"+Ce])},[]),no="beforeRead",io="read",ao="afterRead",so="beforeMain",po="main",fo="afterMain",uo="beforeWrite",co="write",lo="afterWrite",ar=[no,io,ao,so,po,fo,uo,co,lo];function V(e){return e?(e.nodeName||"").toLowerCase():null}function A(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function Q(e){var t=A(e).Element;return e instanceof t||e instanceof Element}function $(e){var t=A(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function $e(e){if(typeof ShadowRoot>"u")return!1;var t=A(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function mo(e){var t=e.state;Object.keys(t.elements).forEach(function(r){var o=t.styles[r]||{},n=t.attributes[r]||{},a=t.elements[r];!$(a)||!V(a)||(Object.assign(a.style,o),Object.keys(n).forEach(function(f){var u=n[f];u===!1?a.removeAttribute(f):a.setAttribute(f,u===!0?"":u)}))})}function vo(e){var t=e.state,r={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,r.popper),t.styles=r,t.elements.arrow&&Object.assign(t.elements.arrow.style,r.arrow),function(){Object.keys(t.elements).forEach(function(o){var n=t.elements[o],a=t.attributes[o]||{},f=Object.keys(t.styles.hasOwnProperty(o)?t.styles[o]:r[o]),u=f.reduce(function(s,l){return s[l]="",s},{});!$(n)||!V(n)||(Object.assign(n.style,u),Object.keys(a).forEach(function(s){n.removeAttribute(s)}))})}}var Ke={name:"applyStyles",enabled:!0,phase:"write",fn:mo,effect:vo,requires:["computeStyles"]};function G(e){return e.split("-")[0]}var re=Math.max,Pe=Math.min,ve=Math.round;function Ve(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function Je(){return!/^((?!chrome|android).)*safari/i.test(Ve())}function Z(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!1);var o=e.getBoundingClientRect(),n=1,a=1;t&&$(e)&&(n=e.offsetWidth>0&&ve(o.width)/e.offsetWidth||1,a=e.offsetHeight>0&&ve(o.height)/e.offsetHeight||1);var f=Q(e)?A(e):window,u=f.visualViewport,s=!Je()&&r,l=(o.left+(s&&u?u.offsetLeft:0))/n,c=(o.top+(s&&u?u.offsetTop:0))/a,h=o.width/n,O=o.height/a;return{width:h,height:O,top:c,right:l+h,bottom:c+O,left:l,x:l,y:c}}function Me(e){var t=Z(e),r=e.offsetWidth,o=e.offsetHeight;return Math.abs(t.width-r)<=1&&(r=t.width),Math.abs(t.height-o)<=1&&(o=t.height),{x:e.offsetLeft,y:e.offsetTop,width:r,height:o}}function Qe(e,t){var r=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(r&&$e(r)){var o=t;do{if(o&&e.isSameNode(o))return!0;o=o.parentNode||o.host}while(o)}return!1}function z(e){return A(e).getComputedStyle(e)}function Rt(e){return["table","td","th"].indexOf(V(e))>=0}function F(e){return((Q(e)?e.ownerDocument:e.document)||window.document).documentElement}function ge(e){return V(e)==="html"?e:e.assignedSlot||e.parentNode||($e(e)?e.host:null)||F(e)}function sr(e){return!$(e)||z(e).position==="fixed"?null:e.offsetParent}function go(e){var t=/firefox/i.test(Ve()),r=/Trident/i.test(Ve());if(r&&$(e)){var o=z(e);if(o.position==="fixed")return null}var n=ge(e);for($e(n)&&(n=n.host);$(n)&&["html","body"].indexOf(V(n))<0;){var a=z(n);if(a.transform!=="none"||a.perspective!=="none"||a.contain==="paint"||["transform","perspective"].indexOf(a.willChange)!==-1||t&&a.willChange==="filter"||t&&a.filter&&a.filter!=="none")return n;n=n.parentNode}return null}function oe(e){for(var t=A(e),r=sr(e);r&&Rt(r)&&z(r).position==="static";)r=sr(r);return r&&(V(r)==="html"||V(r)==="body"&&z(r).position==="static")?t:r||go(e)||t}function Ae(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function Se(e,t,r){return re(e,Pe(t,r))}function pr(e,t,r){var o=Se(e,t,r);return o>r?r:o}function Ze(){return{top:0,right:0,bottom:0,left:0}}function et(e){return Object.assign({},Ze(),e)}function tt(e,t){return t.reduce(function(r,o){return r[o]=e,r},{})}var ho=function(t,r){return t=typeof t=="function"?t(Object.assign({},r.rects,{placement:r.placement})):t,et(typeof t!="number"?t:tt(t,be))};function yo(e){var t,r=e.state,o=e.name,n=e.options,a=r.elements.arrow,f=r.modifiersData.popperOffsets,u=G(r.placement),s=Ae(u),l=[N,j].indexOf(u)>=0,c=l?"height":"width";if(!(!a||!f)){var h=ho(n.padding,r),O=Me(a),g=s==="y"?I:N,w=s==="y"?W:j,y=r.rects.reference[c]+r.rects.reference[s]-f[s]-r.rects.popper[c],b=f[s]-r.rects.reference[s],T=oe(a),P=T?s==="y"?T.clientHeight||0:T.clientWidth||0:0,S=y/2-b/2,i=h[g],E=P-O[c]-h[w],m=P/2-O[c]/2+S,M=Se(i,m,E),k=s;r.modifiersData[o]=(t={},t[k]=M,t.centerOffset=M-m,t)}}function bo(e){var t=e.state,r=e.options,o=r.element,n=o===void 0?"[data-popper-arrow]":o;n!=null&&(typeof n=="string"&&(n=t.elements.popper.querySelector(n),!n)||Qe(t.elements.popper,n)&&(t.elements.arrow=n))}var fr={name:"arrow",enabled:!0,phase:"main",fn:yo,effect:bo,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function ee(e){return e.split("-")[1]}var wo={top:"auto",right:"auto",bottom:"auto",left:"auto"};function xo(e,t){var r=e.x,o=e.y,n=t.devicePixelRatio||1;return{x:ve(r*n)/n||0,y:ve(o*n)/n||0}}function ur(e){var t,r=e.popper,o=e.popperRect,n=e.placement,a=e.variation,f=e.offsets,u=e.position,s=e.gpuAcceleration,l=e.adaptive,c=e.roundOffsets,h=e.isFixed,O=f.x,g=O===void 0?0:O,w=f.y,y=w===void 0?0:w,b=typeof c=="function"?c({x:g,y}):{x:g,y};g=b.x,y=b.y;var T=f.hasOwnProperty("x"),P=f.hasOwnProperty("y"),S=N,i=I,E=window;if(l){var m=oe(r),M="clientHeight",k="clientWidth";if(m===A(r)&&(m=F(r),z(m).position!=="static"&&u==="absolute"&&(M="scrollHeight",k="scrollWidth")),m=m,n===I||(n===N||n===j)&&a===Ce){i=W;var B=h&&m===E&&E.visualViewport?E.visualViewport.height:m[M];y-=B-o.height,y*=s?1:-1}if(n===N||(n===I||n===W)&&a===Ce){S=j;var L=h&&m===E&&E.visualViewport?E.visualViewport.width:m[k];g-=L-o.width,g*=s?1:-1}}var H=Object.assign({position:u},l&&wo),R=c===!0?xo({x:g,y},A(r)):{x:g,y};if(g=R.x,y=R.y,s){var D;return Object.assign({},H,(D={},D[i]=P?"0":"",D[S]=T?"0":"",D.transform=(E.devicePixelRatio||1)<=1?"translate("+g+"px, "+y+"px)":"translate3d("+g+"px, "+y+"px, 0)",D))}return Object.assign({},H,(t={},t[i]=P?y+"px":"",t[S]=T?g+"px":"",t.transform="",t))}function Oo(e){var t=e.state,r=e.options,o=r.gpuAcceleration,n=o===void 0?!0:o,a=r.adaptive,f=a===void 0?!0:a,u=r.roundOffsets,s=u===void 0?!0:u,l={placement:G(t.placement),variation:ee(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:n,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,ur(Object.assign({},l,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:f,roundOffsets:s})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,ur(Object.assign({},l,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:s})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}var cr={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:Oo,data:{}};var wt={passive:!0};function Eo(e){var t=e.state,r=e.instance,o=e.options,n=o.scroll,a=n===void 0?!0:n,f=o.resize,u=f===void 0?!0:f,s=A(t.elements.popper),l=[].concat(t.scrollParents.reference,t.scrollParents.popper);return a&&l.forEach(function(c){c.addEventListener("scroll",r.update,wt)}),u&&s.addEventListener("resize",r.update,wt),function(){a&&l.forEach(function(c){c.removeEventListener("scroll",r.update,wt)}),u&&s.removeEventListener("resize",r.update,wt)}}var lr={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:Eo,data:{}};var To={left:"right",right:"left",bottom:"top",top:"bottom"};function Ge(e){return e.replace(/left|right|bottom|top/g,function(t){return To[t]})}var Co={start:"end",end:"start"};function xt(e){return e.replace(/start|end/g,function(t){return Co[t]})}function De(e){var t=A(e),r=t.pageXOffset,o=t.pageYOffset;return{scrollLeft:r,scrollTop:o}}function Le(e){return Z(F(e)).left+De(e).scrollLeft}function It(e,t){var r=A(e),o=F(e),n=r.visualViewport,a=o.clientWidth,f=o.clientHeight,u=0,s=0;if(n){a=n.width,f=n.height;var l=Je();(l||!l&&t==="fixed")&&(u=n.offsetLeft,s=n.offsetTop)}return{width:a,height:f,x:u+Le(e),y:s}}function Nt(e){var t,r=F(e),o=De(e),n=(t=e.ownerDocument)==null?void 0:t.body,a=re(r.scrollWidth,r.clientWidth,n?n.scrollWidth:0,n?n.clientWidth:0),f=re(r.scrollHeight,r.clientHeight,n?n.scrollHeight:0,n?n.clientHeight:0),u=-o.scrollLeft+Le(e),s=-o.scrollTop;return z(n||r).direction==="rtl"&&(u+=re(r.clientWidth,n?n.clientWidth:0)-a),{width:a,height:f,x:u,y:s}}function Re(e){var t=z(e),r=t.overflow,o=t.overflowX,n=t.overflowY;return/auto|scroll|overlay|hidden/.test(r+n+o)}function Ot(e){return["html","body","#document"].indexOf(V(e))>=0?e.ownerDocument.body:$(e)&&Re(e)?e:Ot(ge(e))}function we(e,t){var r;t===void 0&&(t=[]);var o=Ot(e),n=o===((r=e.ownerDocument)==null?void 0:r.body),a=A(o),f=n?[a].concat(a.visualViewport||[],Re(o)?o:[]):o,u=t.concat(f);return n?u:u.concat(we(ge(f)))}function Ue(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function Po(e,t){var r=Z(e,!1,t==="fixed");return r.top=r.top+e.clientTop,r.left=r.left+e.clientLeft,r.bottom=r.top+e.clientHeight,r.right=r.left+e.clientWidth,r.width=e.clientWidth,r.height=e.clientHeight,r.x=r.left,r.y=r.top,r}function dr(e,t,r){return t===yt?Ue(It(e,r)):Q(t)?Po(t,r):Ue(Nt(F(e)))}function Mo(e){var t=we(ge(e)),r=["absolute","fixed"].indexOf(z(e).position)>=0,o=r&&$(e)?oe(e):e;return Q(o)?t.filter(function(n){return Q(n)&&Qe(n,o)&&V(n)!=="body"}):[]}function Bt(e,t,r,o){var n=t==="clippingParents"?Mo(e):[].concat(t),a=[].concat(n,[r]),f=a[0],u=a.reduce(function(s,l){var c=dr(e,l,o);return s.top=re(c.top,s.top),s.right=Pe(c.right,s.right),s.bottom=Pe(c.bottom,s.bottom),s.left=re(c.left,s.left),s},dr(e,f,o));return u.width=u.right-u.left,u.height=u.bottom-u.top,u.x=u.left,u.y=u.top,u}function rt(e){var t=e.reference,r=e.element,o=e.placement,n=o?G(o):null,a=o?ee(o):null,f=t.x+t.width/2-r.width/2,u=t.y+t.height/2-r.height/2,s;switch(n){case I:s={x:f,y:t.y-r.height};break;case W:s={x:f,y:t.y+t.height};break;case j:s={x:t.x+t.width,y:u};break;case N:s={x:t.x-r.width,y:u};break;default:s={x:t.x,y:t.y}}var l=n?Ae(n):null;if(l!=null){var c=l==="y"?"height":"width";switch(a){case me:s[l]=s[l]-(t[c]/2-r[c]/2);break;case Ce:s[l]=s[l]+(t[c]/2-r[c]/2);break;default:}}return s}function ne(e,t){t===void 0&&(t={});var r=t,o=r.placement,n=o===void 0?e.placement:o,a=r.strategy,f=a===void 0?e.strategy:a,u=r.boundary,s=u===void 0?nr:u,l=r.rootBoundary,c=l===void 0?yt:l,h=r.elementContext,O=h===void 0?We:h,g=r.altBoundary,w=g===void 0?!1:g,y=r.padding,b=y===void 0?0:y,T=et(typeof b!="number"?b:tt(b,be)),P=O===We?ir:We,S=e.rects.popper,i=e.elements[w?P:O],E=Bt(Q(i)?i:i.contextElement||F(e.elements.popper),s,c,f),m=Z(e.elements.reference),M=rt({reference:m,element:S,strategy:"absolute",placement:n}),k=Ue(Object.assign({},S,M)),B=O===We?k:m,L={top:E.top-B.top+T.top,bottom:B.bottom-E.bottom+T.bottom,left:E.left-B.left+T.left,right:B.right-E.right+T.right},H=e.modifiersData.offset;if(O===We&&H){var R=H[n];Object.keys(L).forEach(function(D){var Y=[j,W].indexOf(D)>=0?1:-1,K=[I,W].indexOf(D)>=0?"y":"x";L[D]+=R[K]*Y})}return L}function jt(e,t){t===void 0&&(t={});var r=t,o=r.placement,n=r.boundary,a=r.rootBoundary,f=r.padding,u=r.flipVariations,s=r.allowedAutoPlacements,l=s===void 0?bt:s,c=ee(o),h=c?u?Lt:Lt.filter(function(w){return ee(w)===c}):be,O=h.filter(function(w){return l.indexOf(w)>=0});O.length===0&&(O=h);var g=O.reduce(function(w,y){return w[y]=ne(e,{placement:y,boundary:n,rootBoundary:a,padding:f})[G(y)],w},{});return Object.keys(g).sort(function(w,y){return g[w]-g[y]})}function Ao(e){if(G(e)===ht)return[];var t=Ge(e);return[xt(e),t,xt(t)]}function So(e){var t=e.state,r=e.options,o=e.name;if(!t.modifiersData[o]._skip){for(var n=r.mainAxis,a=n===void 0?!0:n,f=r.altAxis,u=f===void 0?!0:f,s=r.fallbackPlacements,l=r.padding,c=r.boundary,h=r.rootBoundary,O=r.altBoundary,g=r.flipVariations,w=g===void 0?!0:g,y=r.allowedAutoPlacements,b=t.options.placement,T=G(b),P=T===b,S=s||(P||!w?[Ge(b)]:Ao(b)),i=[b].concat(S).reduce(function(ue,te){return ue.concat(G(te)===ht?jt(t,{placement:te,boundary:c,rootBoundary:h,padding:l,flipVariations:w,allowedAutoPlacements:y}):te)},[]),E=t.rects.reference,m=t.rects.popper,M=new Map,k=!0,B=i[0],L=0;L<i.length;L++){var H=i[L],R=G(H),D=ee(H)===me,Y=[I,W].indexOf(R)>=0,K=Y?"width":"height",_=ne(t,{placement:H,boundary:c,rootBoundary:h,altBoundary:O,padding:l}),q=Y?D?j:N:D?W:I;E[K]>m[K]&&(q=Ge(q));var U=Ge(q),ae=[];if(a&&ae.push(_[R]<=0),u&&ae.push(_[q]<=0,_[U]<=0),ae.every(function(ue){return ue})){B=H,k=!1;break}M.set(H,ae)}if(k)for(var se=w?3:1,xe=function(te){var ce=i.find(function(Ne){var le=M.get(Ne);if(le)return le.slice(0,te).every(function(Be){return Be})});if(ce)return B=ce,"break"},pe=se;pe>0;pe--){var Oe=xe(pe);if(Oe==="break")break}t.placement!==B&&(t.modifiersData[o]._skip=!0,t.placement=B,t.reset=!0)}}var mr={name:"flip",enabled:!0,phase:"main",fn:So,requiresIfExists:["offset"],data:{_skip:!1}};function vr(e,t,r){return r===void 0&&(r={x:0,y:0}),{top:e.top-t.height-r.y,right:e.right-t.width+r.x,bottom:e.bottom-t.height+r.y,left:e.left-t.width-r.x}}function gr(e){return[I,j,W,N].some(function(t){return e[t]>=0})}function Do(e){var t=e.state,r=e.name,o=t.rects.reference,n=t.rects.popper,a=t.modifiersData.preventOverflow,f=ne(t,{elementContext:"reference"}),u=ne(t,{altBoundary:!0}),s=vr(f,o),l=vr(u,n,a),c=gr(s),h=gr(l);t.modifiersData[r]={referenceClippingOffsets:s,popperEscapeOffsets:l,isReferenceHidden:c,hasPopperEscaped:h},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":c,"data-popper-escaped":h})}var hr={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:Do};function Lo(e,t,r){var o=G(e),n=[N,I].indexOf(o)>=0?-1:1,a=typeof r=="function"?r(Object.assign({},t,{placement:e})):r,f=a[0],u=a[1];return f=f||0,u=(u||0)*n,[N,j].indexOf(o)>=0?{x:u,y:f}:{x:f,y:u}}function Ro(e){var t=e.state,r=e.options,o=e.name,n=r.offset,a=n===void 0?[0,0]:n,f=bt.reduce(function(c,h){return c[h]=Lo(h,t.rects,a),c},{}),u=f[t.placement],s=u.x,l=u.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=s,t.modifiersData.popperOffsets.y+=l),t.modifiersData[o]=f}var yr={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:Ro};function Io(e){var t=e.state,r=e.name;t.modifiersData[r]=rt({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}var br={name:"popperOffsets",enabled:!0,phase:"read",fn:Io,data:{}};function kt(e){return e==="x"?"y":"x"}function No(e){var t=e.state,r=e.options,o=e.name,n=r.mainAxis,a=n===void 0?!0:n,f=r.altAxis,u=f===void 0?!1:f,s=r.boundary,l=r.rootBoundary,c=r.altBoundary,h=r.padding,O=r.tether,g=O===void 0?!0:O,w=r.tetherOffset,y=w===void 0?0:w,b=ne(t,{boundary:s,rootBoundary:l,padding:h,altBoundary:c}),T=G(t.placement),P=ee(t.placement),S=!P,i=Ae(T),E=kt(i),m=t.modifiersData.popperOffsets,M=t.rects.reference,k=t.rects.popper,B=typeof y=="function"?y(Object.assign({},t.rects,{placement:t.placement})):y,L=typeof B=="number"?{mainAxis:B,altAxis:B}:Object.assign({mainAxis:0,altAxis:0},B),H=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,R={x:0,y:0};if(m){if(a){var D,Y=i==="y"?I:N,K=i==="y"?W:j,_=i==="y"?"height":"width",q=m[i],U=q+b[Y],ae=q-b[K],se=g?-k[_]/2:0,xe=P===me?M[_]:k[_],pe=P===me?-k[_]:-M[_],Oe=t.elements.arrow,ue=g&&Oe?Me(Oe):{width:0,height:0},te=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:Ze(),ce=te[Y],Ne=te[K],le=Se(0,M[_],ue[_]),Be=S?M[_]/2-se-le-ce-L.mainAxis:xe-le-ce-L.mainAxis,he=S?-M[_]/2+se+le+Ne+L.mainAxis:pe+le+Ne+L.mainAxis,je=t.elements.arrow&&oe(t.elements.arrow),at=je?i==="y"?je.clientTop||0:je.clientLeft||0:0,_e=(D=H?.[i])!=null?D:0,st=q+Be-_e-at,pt=q+he-_e,qe=Se(g?Pe(U,st):U,q,g?re(ae,pt):ae);m[i]=qe,R[i]=qe-q}if(u){var Xe,ft=i==="x"?I:N,ut=i==="x"?W:j,de=m[E],ye=E==="y"?"height":"width",ze=de+b[ft],Ee=de-b[ut],Ye=[I,N].indexOf(T)!==-1,ct=(Xe=H?.[E])!=null?Xe:0,lt=Ye?ze:de-M[ye]-k[ye]-ct+L.altAxis,dt=Ye?de+M[ye]+k[ye]-ct-L.altAxis:Ee,mt=g&&Ye?pr(lt,de,dt):Se(g?lt:ze,de,g?dt:Ee);m[E]=mt,R[E]=mt-de}t.modifiersData[o]=R}}var wr={name:"preventOverflow",enabled:!0,phase:"main",fn:No,requiresIfExists:["offset"]};function Ht(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function Wt(e){return e===A(e)||!$(e)?De(e):Ht(e)}function Bo(e){var t=e.getBoundingClientRect(),r=ve(t.width)/e.offsetWidth||1,o=ve(t.height)/e.offsetHeight||1;return r!==1||o!==1}function $t(e,t,r){r===void 0&&(r=!1);var o=$(t),n=$(t)&&Bo(t),a=F(t),f=Z(e,n,r),u={scrollLeft:0,scrollTop:0},s={x:0,y:0};return(o||!o&&!r)&&((V(t)!=="body"||Re(a))&&(u=Wt(t)),$(t)?(s=Z(t,!0),s.x+=t.clientLeft,s.y+=t.clientTop):a&&(s.x=Le(a))),{x:f.left+u.scrollLeft-s.x,y:f.top+u.scrollTop-s.y,width:f.width,height:f.height}}function jo(e){var t=new Map,r=new Set,o=[];e.forEach(function(a){t.set(a.name,a)});function n(a){r.add(a.name);var f=[].concat(a.requires||[],a.requiresIfExists||[]);f.forEach(function(u){if(!r.has(u)){var s=t.get(u);s&&n(s)}}),o.push(a)}return e.forEach(function(a){r.has(a.name)||n(a)}),o}function Vt(e){var t=jo(e);return ar.reduce(function(r,o){return r.concat(t.filter(function(n){return n.phase===o}))},[])}function Gt(e){var t;return function(){return t||(t=new Promise(function(r){Promise.resolve().then(function(){t=void 0,r(e())})})),t}}function Ut(e){var t=e.reduce(function(r,o){var n=r[o.name];return r[o.name]=n?Object.assign({},n,o,{options:Object.assign({},n.options,o.options),data:Object.assign({},n.data,o.data)}):o,r},{});return Object.keys(t).map(function(r){return t[r]})}var xr={placement:"bottom",modifiers:[],strategy:"absolute"};function Or(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return!t.some(function(o){return!(o&&typeof o.getBoundingClientRect=="function")})}function Er(e){e===void 0&&(e={});var t=e,r=t.defaultModifiers,o=r===void 0?[]:r,n=t.defaultOptions,a=n===void 0?xr:n;return function(u,s,l){l===void 0&&(l=a);var c={placement:"bottom",orderedModifiers:[],options:Object.assign({},xr,a),modifiersData:{},elements:{reference:u,popper:s},attributes:{},styles:{}},h=[],O=!1,g={state:c,setOptions:function(T){var P=typeof T=="function"?T(c.options):T;y(),c.options=Object.assign({},a,c.options,P),c.scrollParents={reference:Q(u)?we(u):u.contextElement?we(u.contextElement):[],popper:we(s)};var S=Vt(Ut([].concat(o,c.options.modifiers)));return c.orderedModifiers=S.filter(function(i){return i.enabled}),w(),g.update()},forceUpdate:function(){if(!O){var T=c.elements,P=T.reference,S=T.popper;if(Or(P,S)){c.rects={reference:$t(P,oe(S),c.options.strategy==="fixed"),popper:Me(S)},c.reset=!1,c.placement=c.options.placement,c.orderedModifiers.forEach(function(L){return c.modifiersData[L.name]=Object.assign({},L.data)});for(var i=0;i<c.orderedModifiers.length;i++){if(c.reset===!0){c.reset=!1,i=-1;continue}var E=c.orderedModifiers[i],m=E.fn,M=E.options,k=M===void 0?{}:M,B=E.name;typeof m=="function"&&(c=m({state:c,options:k,name:B,instance:g})||c)}}}},update:Gt(function(){return new Promise(function(b){g.forceUpdate(),b(c)})}),destroy:function(){y(),O=!0}};if(!Or(u,s))return g;g.setOptions(l).then(function(b){!O&&l.onFirstUpdate&&l.onFirstUpdate(b)});function w(){c.orderedModifiers.forEach(function(b){var T=b.name,P=b.options,S=P===void 0?{}:P,i=b.effect;if(typeof i=="function"){var E=i({state:c,name:T,instance:g,options:S}),m=function(){};h.push(E||m)}})}function y(){h.forEach(function(b){return b()}),h=[]}return g}}var ko=[lr,br,cr,Ke,yr,mr,wr,fr,hr],Ft=Er({defaultModifiers:ko});var Ho="tippy-box",Ir="tippy-content",Wo="tippy-backdrop",Nr="tippy-arrow",Br="tippy-svg-arrow",Ie={passive:!0,capture:!0},jr=function(){return document.body};function _t(e,t,r){if(Array.isArray(e)){var o=e[t];return o??(Array.isArray(r)?r[t]:r)}return e}function Jt(e,t){var r={}.toString.call(e);return r.indexOf("[object")===0&&r.indexOf(t+"]")>-1}function kr(e,t){return typeof e=="function"?e.apply(void 0,t):e}function Tr(e,t){if(t===0)return e;var r;return function(o){clearTimeout(r),r=setTimeout(function(){e(o)},t)}}function $o(e){return e.split(/\s+/).filter(Boolean)}function Fe(e){return[].concat(e)}function Cr(e,t){e.indexOf(t)===-1&&e.push(t)}function Vo(e){return e.filter(function(t,r){return e.indexOf(t)===r})}function Go(e){return e.split("-")[0]}function Tt(e){return[].slice.call(e)}function Pr(e){return Object.keys(e).reduce(function(t,r){return e[r]!==void 0&&(t[r]=e[r]),t},{})}function ot(){return document.createElement("div")}function Ct(e){return["Element","Fragment"].some(function(t){return Jt(e,t)})}function Uo(e){return Jt(e,"NodeList")}function Fo(e){return Jt(e,"MouseEvent")}function _o(e){return!!(e&&e._tippy&&e._tippy.reference===e)}function qo(e){return Ct(e)?[e]:Uo(e)?Tt(e):Array.isArray(e)?e:Tt(document.querySelectorAll(e))}function qt(e,t){e.forEach(function(r){r&&(r.style.transitionDuration=t+"ms")})}function Mr(e,t){e.forEach(function(r){r&&r.setAttribute("data-state",t)})}function Xo(e){var t,r=Fe(e),o=r[0];return o!=null&&(t=o.ownerDocument)!=null&&t.body?o.ownerDocument:document}function zo(e,t){var r=t.clientX,o=t.clientY;return e.every(function(n){var a=n.popperRect,f=n.popperState,u=n.props,s=u.interactiveBorder,l=Go(f.placement),c=f.modifiersData.offset;if(!c)return!0;var h=l==="bottom"?c.top.y:0,O=l==="top"?c.bottom.y:0,g=l==="right"?c.left.x:0,w=l==="left"?c.right.x:0,y=a.top-o+h>s,b=o-a.bottom-O>s,T=a.left-r+g>s,P=r-a.right-w>s;return y||b||T||P})}function Xt(e,t,r){var o=t+"EventListener";["transitionend","webkitTransitionEnd"].forEach(function(n){e[o](n,r)})}function Ar(e,t){for(var r=t;r;){var o;if(e.contains(r))return!0;r=r.getRootNode==null||(o=r.getRootNode())==null?void 0:o.host}return!1}var fe={isTouch:!1},Sr=0;function Yo(){fe.isTouch||(fe.isTouch=!0,window.performance&&document.addEventListener("mousemove",Hr))}function Hr(){var e=performance.now();e-Sr<20&&(fe.isTouch=!1,document.removeEventListener("mousemove",Hr)),Sr=e}function Ko(){var e=document.activeElement;if(_o(e)){var t=e._tippy;e.blur&&!t.state.isVisible&&e.blur()}}function Jo(){document.addEventListener("touchstart",Yo,Ie),window.addEventListener("blur",Ko)}var Qo=typeof window<"u"&&typeof document<"u",Zo=Qo?!!window.msCrypto:!1;var en={animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},tn={allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999},ie=Object.assign({appendTo:jr,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},en,tn),rn=Object.keys(ie),on=function(t){var r=Object.keys(t);r.forEach(function(o){ie[o]=t[o]})};function Wr(e){var t=e.plugins||[],r=t.reduce(function(o,n){var a=n.name,f=n.defaultValue;if(a){var u;o[a]=e[a]!==void 0?e[a]:(u=ie[a])!=null?u:f}return o},{});return Object.assign({},e,r)}function nn(e,t){var r=t?Object.keys(Wr(Object.assign({},ie,{plugins:t}))):rn,o=r.reduce(function(n,a){var f=(e.getAttribute("data-tippy-"+a)||"").trim();if(!f)return n;if(a==="content")n[a]=f;else try{n[a]=JSON.parse(f)}catch{n[a]=f}return n},{});return o}function Dr(e,t){var r=Object.assign({},t,{content:kr(t.content,[e])},t.ignoreAttributes?{}:nn(e,t.plugins));return r.aria=Object.assign({},ie.aria,r.aria),r.aria={expanded:r.aria.expanded==="auto"?t.interactive:r.aria.expanded,content:r.aria.content==="auto"?t.interactive?null:"describedby":r.aria.content},r}var an=function(){return"innerHTML"};function Yt(e,t){e[an()]=t}function Lr(e){var t=ot();return e===!0?t.className=Nr:(t.className=Br,Ct(e)?t.appendChild(e):Yt(t,e)),t}function Rr(e,t){Ct(t.content)?(Yt(e,""),e.appendChild(t.content)):typeof t.content!="function"&&(t.allowHTML?Yt(e,t.content):e.textContent=t.content)}function Kt(e){var t=e.firstElementChild,r=Tt(t.children);return{box:t,content:r.find(function(o){return o.classList.contains(Ir)}),arrow:r.find(function(o){return o.classList.contains(Nr)||o.classList.contains(Br)}),backdrop:r.find(function(o){return o.classList.contains(Wo)})}}function $r(e){var t=ot(),r=ot();r.className=Ho,r.setAttribute("data-state","hidden"),r.setAttribute("tabindex","-1");var o=ot();o.className=Ir,o.setAttribute("data-state","hidden"),Rr(o,e.props),t.appendChild(r),r.appendChild(o),n(e.props,e.props);function n(a,f){var u=Kt(t),s=u.box,l=u.content,c=u.arrow;f.theme?s.setAttribute("data-theme",f.theme):s.removeAttribute("data-theme"),typeof f.animation=="string"?s.setAttribute("data-animation",f.animation):s.removeAttribute("data-animation"),f.inertia?s.setAttribute("data-inertia",""):s.removeAttribute("data-inertia"),s.style.maxWidth=typeof f.maxWidth=="number"?f.maxWidth+"px":f.maxWidth,f.role?s.setAttribute("role",f.role):s.removeAttribute("role"),(a.content!==f.content||a.allowHTML!==f.allowHTML)&&Rr(l,e.props),f.arrow?c?a.arrow!==f.arrow&&(s.removeChild(c),s.appendChild(Lr(f.arrow))):s.appendChild(Lr(f.arrow)):c&&s.removeChild(c)}return{popper:t,onUpdate:n}}$r.$$tippy=!0;var sn=1,Et=[],zt=[];function pn(e,t){var r=Dr(e,Object.assign({},ie,Wr(Pr(t)))),o,n,a,f=!1,u=!1,s=!1,l=!1,c,h,O,g=[],w=Tr(st,r.interactiveDebounce),y,b=sn++,T=null,P=Vo(r.plugins),S={isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},i={id:b,reference:e,popper:ot(),popperInstance:T,props:r,state:S,plugins:P,clearDelayTimeouts:lt,setProps:dt,setContent:mt,show:Qr,hide:Zr,hideWithInteractivity:eo,enable:Ye,disable:ct,unmount:to,destroy:ro};if(!r.render)return i;var E=r.render(i),m=E.popper,M=E.onUpdate;m.setAttribute("data-tippy-root",""),m.id="tippy-"+i.id,i.popper=m,e._tippy=i,m._tippy=i;var k=P.map(function(p){return p.fn(i)}),B=e.hasAttribute("aria-expanded");return je(),se(),q(),U("onCreate",[i]),r.showOnCreate&&ze(),m.addEventListener("mouseenter",function(){i.props.interactive&&i.state.isVisible&&i.clearDelayTimeouts()}),m.addEventListener("mouseleave",function(){i.props.interactive&&i.props.trigger.indexOf("mouseenter")>=0&&Y().addEventListener("mousemove",w)}),i;function L(){var p=i.props.touch;return Array.isArray(p)?p:[p,0]}function H(){return L()[0]==="hold"}function R(){var p;return!!((p=i.props.render)!=null&&p.$$tippy)}function D(){return y||e}function Y(){var p=D().parentNode;return p?Xo(p):document}function K(){return Kt(m)}function _(p){return i.state.isMounted&&!i.state.isVisible||fe.isTouch||c&&c.type==="focus"?0:_t(i.props.delay,p?0:1,ie.delay)}function q(p){p===void 0&&(p=!1),m.style.pointerEvents=i.props.interactive&&!p?"":"none",m.style.zIndex=""+i.props.zIndex}function U(p,d,v){if(v===void 0&&(v=!0),k.forEach(function(x){x[p]&&x[p].apply(x,d)}),v){var C;(C=i.props)[p].apply(C,d)}}function ae(){var p=i.props.aria;if(p.content){var d="aria-"+p.content,v=m.id,C=Fe(i.props.triggerTarget||e);C.forEach(function(x){var X=x.getAttribute(d);if(i.state.isVisible)x.setAttribute(d,X?X+" "+v:v);else{var J=X&&X.replace(v,"").trim();J?x.setAttribute(d,J):x.removeAttribute(d)}})}}function se(){if(!(B||!i.props.aria.expanded)){var p=Fe(i.props.triggerTarget||e);p.forEach(function(d){i.props.interactive?d.setAttribute("aria-expanded",i.state.isVisible&&d===D()?"true":"false"):d.removeAttribute("aria-expanded")})}}function xe(){Y().removeEventListener("mousemove",w),Et=Et.filter(function(p){return p!==w})}function pe(p){if(!(fe.isTouch&&(s||p.type==="mousedown"))){var d=p.composedPath&&p.composedPath()[0]||p.target;if(!(i.props.interactive&&Ar(m,d))){if(Fe(i.props.triggerTarget||e).some(function(v){return Ar(v,d)})){if(fe.isTouch||i.state.isVisible&&i.props.trigger.indexOf("click")>=0)return}else U("onClickOutside",[i,p]);i.props.hideOnClick===!0&&(i.clearDelayTimeouts(),i.hide(),u=!0,setTimeout(function(){u=!1}),i.state.isMounted||ce())}}}function Oe(){s=!0}function ue(){s=!1}function te(){var p=Y();p.addEventListener("mousedown",pe,!0),p.addEventListener("touchend",pe,Ie),p.addEventListener("touchstart",ue,Ie),p.addEventListener("touchmove",Oe,Ie)}function ce(){var p=Y();p.removeEventListener("mousedown",pe,!0),p.removeEventListener("touchend",pe,Ie),p.removeEventListener("touchstart",ue,Ie),p.removeEventListener("touchmove",Oe,Ie)}function Ne(p,d){Be(p,function(){!i.state.isVisible&&m.parentNode&&m.parentNode.contains(m)&&d()})}function le(p,d){Be(p,d)}function Be(p,d){var v=K().box;function C(x){x.target===v&&(Xt(v,"remove",C),d())}if(p===0)return d();Xt(v,"remove",h),Xt(v,"add",C),h=C}function he(p,d,v){v===void 0&&(v=!1);var C=Fe(i.props.triggerTarget||e);C.forEach(function(x){x.addEventListener(p,d,v),g.push({node:x,eventType:p,handler:d,options:v})})}function je(){H()&&(he("touchstart",_e,{passive:!0}),he("touchend",pt,{passive:!0})),$o(i.props.trigger).forEach(function(p){if(p!=="manual")switch(he(p,_e),p){case"mouseenter":he("mouseleave",pt);break;case"focus":he(Zo?"focusout":"blur",qe);break;case"focusin":he("focusout",qe);break}})}function at(){g.forEach(function(p){var d=p.node,v=p.eventType,C=p.handler,x=p.options;d.removeEventListener(v,C,x)}),g=[]}function _e(p){var d,v=!1;if(!(!i.state.isEnabled||Xe(p)||u)){var C=((d=c)==null?void 0:d.type)==="focus";c=p,y=p.currentTarget,se(),!i.state.isVisible&&Fo(p)&&Et.forEach(function(x){return x(p)}),p.type==="click"&&(i.props.trigger.indexOf("mouseenter")<0||f)&&i.props.hideOnClick!==!1&&i.state.isVisible?v=!0:ze(p),p.type==="click"&&(f=!v),v&&!C&&Ee(p)}}function st(p){var d=p.target,v=D().contains(d)||m.contains(d);if(!(p.type==="mousemove"&&v)){var C=ye().concat(m).map(function(x){var X,J=x._tippy,ke=(X=J.popperInstance)==null?void 0:X.state;return ke?{popperRect:x.getBoundingClientRect(),popperState:ke,props:r}:null}).filter(Boolean);zo(C,p)&&(xe(),Ee(p))}}function pt(p){var d=Xe(p)||i.props.trigger.indexOf("click")>=0&&f;if(!d){if(i.props.interactive){i.hideWithInteractivity(p);return}Ee(p)}}function qe(p){i.props.trigger.indexOf("focusin")<0&&p.target!==D()||i.props.interactive&&p.relatedTarget&&m.contains(p.relatedTarget)||Ee(p)}function Xe(p){return fe.isTouch?H()!==p.type.indexOf("touch")>=0:!1}function ft(){ut();var p=i.props,d=p.popperOptions,v=p.placement,C=p.offset,x=p.getReferenceClientRect,X=p.moveTransition,J=R()?Kt(m).arrow:null,ke=x?{getBoundingClientRect:x,contextElement:x.contextElement||D()}:e,or={name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(vt){var He=vt.state;if(R()){var oo=K(),Dt=oo.box;["placement","reference-hidden","escaped"].forEach(function(gt){gt==="placement"?Dt.setAttribute("data-placement",He.placement):He.attributes.popper["data-popper-"+gt]?Dt.setAttribute("data-"+gt,""):Dt.removeAttribute("data-"+gt)}),He.attributes.popper={}}}},Te=[{name:"offset",options:{offset:C}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!X}},or];R()&&J&&Te.push({name:"arrow",options:{element:J,padding:3}}),Te.push.apply(Te,d?.modifiers||[]),i.popperInstance=Ft(ke,m,Object.assign({},d,{placement:v,onFirstUpdate:O,modifiers:Te}))}function ut(){i.popperInstance&&(i.popperInstance.destroy(),i.popperInstance=null)}function de(){var p=i.props.appendTo,d,v=D();i.props.interactive&&p===jr||p==="parent"?d=v.parentNode:d=kr(p,[v]),d.contains(m)||d.appendChild(m),i.state.isMounted=!0,ft()}function ye(){return Tt(m.querySelectorAll("[data-tippy-root]"))}function ze(p){i.clearDelayTimeouts(),p&&U("onTrigger",[i,p]),te();var d=_(!0),v=L(),C=v[0],x=v[1];fe.isTouch&&C==="hold"&&x&&(d=x),d?o=setTimeout(function(){i.show()},d):i.show()}function Ee(p){if(i.clearDelayTimeouts(),U("onUntrigger",[i,p]),!i.state.isVisible){ce();return}if(!(i.props.trigger.indexOf("mouseenter")>=0&&i.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(p.type)>=0&&f)){var d=_(!1);d?n=setTimeout(function(){i.state.isVisible&&i.hide()},d):a=requestAnimationFrame(function(){i.hide()})}}function Ye(){i.state.isEnabled=!0}function ct(){i.hide(),i.state.isEnabled=!1}function lt(){clearTimeout(o),clearTimeout(n),cancelAnimationFrame(a)}function dt(p){if(!i.state.isDestroyed){U("onBeforeUpdate",[i,p]),at();var d=i.props,v=Dr(e,Object.assign({},d,Pr(p),{ignoreAttributes:!0}));i.props=v,je(),d.interactiveDebounce!==v.interactiveDebounce&&(xe(),w=Tr(st,v.interactiveDebounce)),d.triggerTarget&&!v.triggerTarget?Fe(d.triggerTarget).forEach(function(C){C.removeAttribute("aria-expanded")}):v.triggerTarget&&e.removeAttribute("aria-expanded"),se(),q(),M&&M(d,v),i.popperInstance&&(ft(),ye().forEach(function(C){requestAnimationFrame(C._tippy.popperInstance.forceUpdate)})),U("onAfterUpdate",[i,p])}}function mt(p){i.setProps({content:p})}function Qr(){var p=i.state.isVisible,d=i.state.isDestroyed,v=!i.state.isEnabled,C=fe.isTouch&&!i.props.touch,x=_t(i.props.duration,0,ie.duration);if(!(p||d||v||C)&&!D().hasAttribute("disabled")&&(U("onShow",[i],!1),i.props.onShow(i)!==!1)){if(i.state.isVisible=!0,R()&&(m.style.visibility="visible"),q(),te(),i.state.isMounted||(m.style.transition="none"),R()){var X=K(),J=X.box,ke=X.content;qt([J,ke],0)}O=function(){var Te;if(!(!i.state.isVisible||l)){if(l=!0,m.offsetHeight,m.style.transition=i.props.moveTransition,R()&&i.props.animation){var St=K(),vt=St.box,He=St.content;qt([vt,He],x),Mr([vt,He],"visible")}ae(),se(),Cr(zt,i),(Te=i.popperInstance)==null||Te.forceUpdate(),U("onMount",[i]),i.props.animation&&R()&&le(x,function(){i.state.isShown=!0,U("onShown",[i])})}},de()}}function Zr(){var p=!i.state.isVisible,d=i.state.isDestroyed,v=!i.state.isEnabled,C=_t(i.props.duration,1,ie.duration);if(!(p||d||v)&&(U("onHide",[i],!1),i.props.onHide(i)!==!1)){if(i.state.isVisible=!1,i.state.isShown=!1,l=!1,f=!1,R()&&(m.style.visibility="hidden"),xe(),ce(),q(!0),R()){var x=K(),X=x.box,J=x.content;i.props.animation&&(qt([X,J],C),Mr([X,J],"hidden"))}ae(),se(),i.props.animation?R()&&Ne(C,i.unmount):i.unmount()}}function eo(p){Y().addEventListener("mousemove",w),Cr(Et,w),w(p)}function to(){i.state.isVisible&&i.hide(),i.state.isMounted&&(ut(),ye().forEach(function(p){p._tippy.unmount()}),m.parentNode&&m.parentNode.removeChild(m),zt=zt.filter(function(p){return p!==i}),i.state.isMounted=!1,U("onHidden",[i]))}function ro(){i.state.isDestroyed||(i.clearDelayTimeouts(),i.unmount(),at(),delete e._tippy,i.state.isDestroyed=!0,U("onDestroy",[i]))}}function nt(e,t){t===void 0&&(t={});var r=ie.plugins.concat(t.plugins||[]);Jo();var o=Object.assign({},t,{plugins:r}),n=qo(e);if(0)var a,f;var u=n.reduce(function(s,l){var c=l&&pn(l,o);return c&&s.push(c),s},[]);return Ct(e)?u[0]:u}nt.defaultProps=ie;nt.setDefaultProps=on;nt.currentInput=fe;var lp=Object.assign({},Ke,{effect:function(t){var r=t.state,o={popper:{position:r.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(r.elements.popper.style,o.popper),r.styles=o,r.elements.arrow&&Object.assign(r.elements.arrow.style,o.arrow)}});nt.setDefaultProps({render:$r});var Vr=nt;var it={selector:".gene-tooltip",api:"mygene",prefetch:"smart",prefetchThreshold:15,truncateSummary:3,display:{species:!0,location:!0,ideogram:!0},ideogram:{enabled:!0,height:100,showLabels:!1},tippyOptions:{allowHTML:!0,interactive:!0,placement:"bottom",theme:"light"}};var Qt=new Map,Zt=(e,t)=>`${e}_${t}`,Gr=(e,t)=>Qt.has(Zt(e,t)),Ur=(e,t)=>Qt.get(Zt(e,t)),er=(e,t,r)=>{Qt.set(Zt(e,t),r)},Fr=(e,t)=>{e.forEach((r,o)=>{er(o,t,r)})};async function Pt(e,t){if(!e||e.length===0)return new Map;console.log(`Making BATCH request for ${e.length} genes in species: ${t}`);let r="https://mygene.info/v3/query",o=e.join(","),n=["_id","query","symbol","name","summary","taxid","genomic_pos"].join(",");try{let a=await fetch(r,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:`q=${o}&species=${t}&scopes=symbol&fields=${n}`});if(!a.ok)throw new Error(`HTTP error! status: ${a.status}`);let f=await a.json(),u=new Map;for(let s of f)s.notfound||u.set(s.query,s);return u}catch(a){return console.error("Batch fetch failed:",a),new Map}}var qr=[{key:"ncbi",name:"NCBI",url:e=>`https://www.ncbi.nlm.nih.gov/gene/${e}`,requires:"id"},{key:"ensembl",name:"Ensembl",url:e=>`https://www.ensembl.org/id/${e}`,requires:"id"},{key:"genecards",name:"GeneCards",url:e=>`https://www.genecards.org/cgi-bin/carddisp.pl?gene=${e}`,requires:"symbol"}];var fn={9606:{common:"Human",genus:"Homo sapiens",icon:"\u{1F9D1}"},10090:{common:"Mouse",genus:"Mus musculus",icon:"\u{1F42D}"},10116:{common:"Rat",genus:"Rattus norvegicus",icon:"\u{1F400}"},7227:{common:"Fruitfly",genus:"Drosophila melanogaster",icon:"\u{1FAB0}"},6239:{common:"Nematode",genus:"Caenorhabditis elegans",icon:"\u{1FAB1}"},7955:{common:"Zebrafish",genus:"Danio rerio",icon:"\u{1F41F}"},3702:{common:"Thale-cress",genus:"Arabidopsis thaliana",icon:"\u{1F331}"},8364:{common:"Frog",genus:"Xenopus tropicalis",icon:"\u{1F438}"},9823:{common:"Pig",genus:"Sus scrofa",icon:"\u{1F416}"}};function un(e){let t=fn[e]??{common:"Unknown",genus:"",icon:"\u2753"};return`
    <div class="gene-tooltip-section gene-tooltip-species">
      <span class="gene-tooltip-species-icon">${t.icon}</span>
      <span>${t.common}, <em>${t.genus}</em></span>
    </div>
  `}function cn(e,t=!1,r=""){if(!e)return"";let o=Array.isArray(e)?e[0]:e;if(!o)return"";let n=o.start.toLocaleString(),a=o.end.toLocaleString();return`
      <div class="gene-tooltip-section gene-tooltip-location">
        <div>
          <span class="gene-tooltip-location-label">Location:</span>
          <span>chr${o.chr}:${n}-${a}</span>
        </div>
        ${t?`<div class="gene-tooltip-ideo" id="gene-tooltip-ideo-${r}"></div>`:""}
      </div>
    `}function tr(e,t={}){if(!e)return"<p>Gene not found.</p>";let{sources:r=["ncbi"],truncate:o=3,display:n={species:!0,location:!0,ideogram:!1}}=t,a=qr.filter(c=>r.includes(c.key)).map(c=>c.requires==="id"&&!e._id||c.requires==="symbol"&&!e.symbol?"":`<a href="${c.url(e._id||e.symbol)}"
                 target="_blank"
                 rel="noopener noreferrer">
                ${c.name}
              </a>`).filter(Boolean).join(" | "),f=e.summary||"No summary available.",u=o&&f.length>0?"gene-tooltip-summary":"gene-tooltip-summary-full",s=o?'tabindex="0"':"",l=o?`style="--line-clamp: ${o};"`:"";return`
    <div class="gene-tooltip-content" style="text-align: left; max-width: 300px;">
      <div class="gene-tooltip-header">
        <strong>
          <a href="https://www.ncbi.nlm.nih.gov/gene/${e._id}" 
             target="_blank" 
             rel="noopener noreferrer"
             class="gene-tooltip-link">
            ${e.symbol}
          </a>
        </strong>
        <span class="gene-tooltip-name">(${e.name})</span>
      </div>

      ${n.species&&e.taxid?un(e.taxid):""}
      ${n.location?cn(e.genomic_pos,n.ideogram,e._id):""}
      
      <p class="${u}" ${s} ${l}>${f}</p>
      
      ${a?`<div class="gene-tooltip-links">${a}</div>`:""}
    </div>
  `}function Xr(e){let t=Array.from(document.querySelectorAll(e)),r=[],o=/[,\s;]+/;return t.forEach(n=>{let f=(n.textContent||"").trim().split(o).filter(Boolean);if(f.length>1){let u=n.dataset.species;if(!u){console.warn("Gene list container found without a data-species attribute. Skipping.",n);return}n.innerHTML="",f.forEach((s,l)=>{let c=document.createElement("span");c.textContent=s,c.dataset.species=u;let h=e.startsWith(".")?e.substring(1):e;c.classList.add(h),n.appendChild(c),r.push(c),l<f.length-1&&n.appendChild(document.createTextNode(", "))})}else f.length===1&&(n.textContent=f[0],r.push(n))}),r}function Mt(e){let t=e.textContent?.trim(),r=e.dataset.species;return!t||!r?null:{symbol:t,species:r}}function zr(e){let t=new Map;return e.forEach(r=>{let o=Mt(r);!o||Gr(o.symbol,o.species)||(t.has(o.species)||t.set(o.species,new Set),t.get(o.species).add(o.symbol))}),t}async function Yr(e){let t=Array.from(e.entries()).map(([r,o])=>Pt(Array.from(o),r).then(n=>Fr(n,r)));await Promise.all(t)}function ln(e){let t=zr(e);Yr(t)}function dn(e){let t=new Set,r=null,o=()=>{if(t.size===0)return;let a=zr(Array.from(t));Yr(a),t.clear()},n=new IntersectionObserver((a,f)=>{a.forEach(u=>{u.isIntersecting&&(t.add(u.target),f.unobserve(u.target),r&&clearTimeout(r),r=setTimeout(o,200))})},{rootMargin:"200px"});e.forEach(a=>n.observe(a))}function Kr(e,t,r){let o=t.length;e==="all"||e==="smart"&&o<=r?(console.log(`Prefetching all ${o} genes.`),ln(t)):e==="smart"&&o>r&&(console.log("Using 'smart' prefetch strategy with IntersectionObserver."),dn(t))}function Jr(){document.addEventListener("click",e=>{let t=e.target;t.classList.contains("gene-tooltip-summary")&&t.classList.toggle("expanded")}),document.addEventListener("keydown",e=>{let t=e.target;t?.classList.contains("gene-tooltip-summary")&&(e.key==="Enter"||e.key===" ")&&(e.preventDefault(),t.classList.toggle("expanded"))})}var At=null;async function mn(){if(At)return At;if(window.Ideogram)return Promise.resolve(window.Ideogram);if(typeof window<"u"&&typeof document<"u"&&typeof window.GeneTooltip<"u"){let t=`[GeneTooltip] Ideogram global variable not found.
Please ensure the Ideogram script is loaded on the page
before initializing GeneTooltip, or use the ESM/CJS build.`;return console.error(t),Promise.reject(new Error(t))}return At=import("ideogram").then(t=>t.default).catch(t=>{let r=`[GeneTooltip] Failed to load Ideogram. 
Please ensure 'ideogram' is installed (it's a peer dependency).`;return console.error(r,t),Promise.reject(new Error(r))}),At}async function rr(e,t,r){console.log("[GeneTooltip] Starting renderIdeogram for:",t.symbol);let o=e.popper.querySelector(".gene-tooltip-ideo");try{let n=await mn();if(!n){o&&(o.innerHTML="<small>Ideogram unavailable</small>");return}let a=`#gene-tooltip-ideo-${t._id}`,f=e.popper.querySelector(a);if(!f){console.error(`[GeneTooltip] CRITICAL: Ideogram container '${a}' not found.`);return}let u=Array.isArray(t.genomic_pos)?t.genomic_pos[0]:t.genomic_pos;if(!u){f.innerHTML="<small>No genomic position</small>";return}let s=String(u.chr);s.toLowerCase().startsWith("chr")&&(s=s.substring(3));let l="human";t.taxid===10090&&(l="mouse");let c={container:a,organism:l,chromosome:s,chrHeight:r.height??100,orientation:"horizontal",showBandLabels:r.showLabels??!1,annotations:[{name:t.symbol,chr:s,start:u.start,stop:u.end}]};new n(c),console.log("[GeneTooltip] Ideogram initialized.")}catch(n){console.error("[GeneTooltip] Ideogram failed to render:",n),o&&(o.innerHTML="<small>Ideogram not installed or failed to load.</small>")}}function vn(e={}){let t={...it,...e,display:{...it.display,...e.display},ideogram:{...it.ideogram,...e.ideogram},tippyOptions:{...it.tippyOptions,...e.tippyOptions}},r=Xr(t.selector);r.length!==0&&(Kr(t.prefetch,r,t.prefetchThreshold),Vr(r,{...t.tippyOptions,content:"Loading...",onShow(o){let n=Mt(o.reference);if(!n){o.setContent("Invalid gene element");return}let{symbol:a,species:f}=n,u={truncate:t.truncateSummary,display:{...t.display,ideogram:t.ideogram?.enabled??!1}},s=Ur(a,f);if(typeof s<"u"){o.setContent(tr(s,u)),t.ideogram?.enabled&&s?.genomic_pos&&setTimeout(()=>{rr(o,s,t.ideogram)},0);return}Pt([a],f).then(l=>{let c=l.get(a)||null;er(a,f,c),o.setContent(tr(c,u)),t.ideogram?.enabled&&c?.genomic_pos&&setTimeout(()=>{rr(o,c,t.ideogram)},0)}).catch(l=>{console.error(`Failed to fetch data for ${a}`,l),o.setContent("Error loading data.")})}}),Jr())}var jp={init:vn};export{jp as default};
