var R="top",H="bottom",N="right",k="left",yt="auto",be=[R,H,N,k],me="start",Ce="end",ar="clippingParents",bt="viewport",He="popper",sr="reference",It=be.reduce(function(e,t){return e.concat([t+"-"+me,t+"-"+Ce])},[]),wt=[].concat(be,[yt]).reduce(function(e,t){return e.concat([t,t+"-"+me,t+"-"+Ce])},[]),sn="beforeRead",pn="read",fn="afterRead",un="beforeMain",cn="main",ln="afterMain",dn="beforeWrite",mn="write",vn="afterWrite",pr=[sn,pn,fn,un,cn,ln,dn,mn,vn];function V(e){return e?(e.nodeName||"").toLowerCase():null}function S(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function Q(e){var t=S(e).Element;return e instanceof t||e instanceof Element}function W(e){var t=S(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function We(e){if(typeof ShadowRoot>"u")return!1;var t=S(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function gn(e){var t=e.state;Object.keys(t.elements).forEach(function(r){var n=t.styles[r]||{},o=t.attributes[r]||{},a=t.elements[r];!W(a)||!V(a)||(Object.assign(a.style,n),Object.keys(o).forEach(function(p){var f=o[p];f===!1?a.removeAttribute(p):a.setAttribute(p,f===!0?"":f)}))})}function hn(e){var t=e.state,r={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,r.popper),t.styles=r,t.elements.arrow&&Object.assign(t.elements.arrow.style,r.arrow),function(){Object.keys(t.elements).forEach(function(n){var o=t.elements[n],a=t.attributes[n]||{},p=Object.keys(t.styles.hasOwnProperty(n)?t.styles[n]:r[n]),f=p.reduce(function(s,l){return s[l]="",s},{});!W(o)||!V(o)||(Object.assign(o.style,f),Object.keys(a).forEach(function(s){o.removeAttribute(s)}))})}}var Ke={name:"applyStyles",enabled:!0,phase:"write",fn:gn,effect:hn,requires:["computeStyles"]};function G(e){return e.split("-")[0]}var re=Math.max,Pe=Math.min,ve=Math.round;function Ve(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function Je(){return!/^((?!chrome|android).)*safari/i.test(Ve())}function Z(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!1);var n=e.getBoundingClientRect(),o=1,a=1;t&&W(e)&&(o=e.offsetWidth>0&&ve(n.width)/e.offsetWidth||1,a=e.offsetHeight>0&&ve(n.height)/e.offsetHeight||1);var p=Q(e)?S(e):window,f=p.visualViewport,s=!Je()&&r,l=(n.left+(s&&f?f.offsetLeft:0))/o,c=(n.top+(s&&f?f.offsetTop:0))/a,g=n.width/o,y=n.height/a;return{width:g,height:y,top:c,right:l+g,bottom:c+y,left:l,x:l,y:c}}function Me(e){var t=Z(e),r=e.offsetWidth,n=e.offsetHeight;return Math.abs(t.width-r)<=1&&(r=t.width),Math.abs(t.height-n)<=1&&(n=t.height),{x:e.offsetLeft,y:e.offsetTop,width:r,height:n}}function Qe(e,t){var r=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(r&&We(r)){var n=t;do{if(n&&e.isSameNode(n))return!0;n=n.parentNode||n.host}while(n)}return!1}function z(e){return S(e).getComputedStyle(e)}function Rt(e){return["table","td","th"].indexOf(V(e))>=0}function U(e){return((Q(e)?e.ownerDocument:e.document)||window.document).documentElement}function ge(e){return V(e)==="html"?e:e.assignedSlot||e.parentNode||(We(e)?e.host:null)||U(e)}function fr(e){return!W(e)||z(e).position==="fixed"?null:e.offsetParent}function yn(e){var t=/firefox/i.test(Ve()),r=/Trident/i.test(Ve());if(r&&W(e)){var n=z(e);if(n.position==="fixed")return null}var o=ge(e);for(We(o)&&(o=o.host);W(o)&&["html","body"].indexOf(V(o))<0;){var a=z(o);if(a.transform!=="none"||a.perspective!=="none"||a.contain==="paint"||["transform","perspective"].indexOf(a.willChange)!==-1||t&&a.willChange==="filter"||t&&a.filter&&a.filter!=="none")return o;o=o.parentNode}return null}function ne(e){for(var t=S(e),r=fr(e);r&&Rt(r)&&z(r).position==="static";)r=fr(r);return r&&(V(r)==="html"||V(r)==="body"&&z(r).position==="static")?t:r||yn(e)||t}function Se(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function Ae(e,t,r){return re(e,Pe(t,r))}function ur(e,t,r){var n=Ae(e,t,r);return n>r?r:n}function Ze(){return{top:0,right:0,bottom:0,left:0}}function et(e){return Object.assign({},Ze(),e)}function tt(e,t){return t.reduce(function(r,n){return r[n]=e,r},{})}var bn=function(t,r){return t=typeof t=="function"?t(Object.assign({},r.rects,{placement:r.placement})):t,et(typeof t!="number"?t:tt(t,be))};function wn(e){var t,r=e.state,n=e.name,o=e.options,a=r.elements.arrow,p=r.modifiersData.popperOffsets,f=G(r.placement),s=Se(f),l=[k,N].indexOf(f)>=0,c=l?"height":"width";if(!(!a||!p)){var g=bn(o.padding,r),y=Me(a),v=s==="y"?R:k,x=s==="y"?H:N,b=r.rects.reference[c]+r.rects.reference[s]-p[s]-r.rects.popper[c],w=p[s]-r.rects.reference[s],T=ne(a),P=T?s==="y"?T.clientHeight||0:T.clientWidth||0:0,A=b/2-w/2,i=g[v],E=P-y[c]-g[x],m=P/2-y[c]/2+A,M=Ae(i,m,E),B=s;r.modifiersData[n]=(t={},t[B]=M,t.centerOffset=M-m,t)}}function xn(e){var t=e.state,r=e.options,n=r.element,o=n===void 0?"[data-popper-arrow]":n;o!=null&&(typeof o=="string"&&(o=t.elements.popper.querySelector(o),!o)||Qe(t.elements.popper,o)&&(t.elements.arrow=o))}var cr={name:"arrow",enabled:!0,phase:"main",fn:wn,effect:xn,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function ee(e){return e.split("-")[1]}var On={top:"auto",right:"auto",bottom:"auto",left:"auto"};function En(e,t){var r=e.x,n=e.y,o=t.devicePixelRatio||1;return{x:ve(r*o)/o||0,y:ve(n*o)/o||0}}function lr(e){var t,r=e.popper,n=e.popperRect,o=e.placement,a=e.variation,p=e.offsets,f=e.position,s=e.gpuAcceleration,l=e.adaptive,c=e.roundOffsets,g=e.isFixed,y=p.x,v=y===void 0?0:y,x=p.y,b=x===void 0?0:x,w=typeof c=="function"?c({x:v,y:b}):{x:v,y:b};v=w.x,b=w.y;var T=p.hasOwnProperty("x"),P=p.hasOwnProperty("y"),A=k,i=R,E=window;if(l){var m=ne(r),M="clientHeight",B="clientWidth";if(m===S(r)&&(m=U(r),z(m).position!=="static"&&f==="absolute"&&(M="scrollHeight",B="scrollWidth")),m=m,o===R||(o===k||o===N)&&a===Ce){i=H;var $=g&&m===E&&E.visualViewport?E.visualViewport.height:m[M];b-=$-n.height,b*=s?1:-1}if(o===k||(o===R||o===H)&&a===Ce){A=N;var L=g&&m===E&&E.visualViewport?E.visualViewport.width:m[B];v-=L-n.width,v*=s?1:-1}}var j=Object.assign({position:f},l&&On),I=c===!0?En({x:v,y:b},S(r)):{x:v,y:b};if(v=I.x,b=I.y,s){var D;return Object.assign({},j,(D={},D[i]=P?"0":"",D[A]=T?"0":"",D.transform=(E.devicePixelRatio||1)<=1?"translate("+v+"px, "+b+"px)":"translate3d("+v+"px, "+b+"px, 0)",D))}return Object.assign({},j,(t={},t[i]=P?b+"px":"",t[A]=T?v+"px":"",t.transform="",t))}function Tn(e){var t=e.state,r=e.options,n=r.gpuAcceleration,o=n===void 0?!0:n,a=r.adaptive,p=a===void 0?!0:a,f=r.roundOffsets,s=f===void 0?!0:f,l={placement:G(t.placement),variation:ee(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:o,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,lr(Object.assign({},l,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:p,roundOffsets:s})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,lr(Object.assign({},l,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:s})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}var dr={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:Tn,data:{}};var xt={passive:!0};function Cn(e){var t=e.state,r=e.instance,n=e.options,o=n.scroll,a=o===void 0?!0:o,p=n.resize,f=p===void 0?!0:p,s=S(t.elements.popper),l=[].concat(t.scrollParents.reference,t.scrollParents.popper);return a&&l.forEach(function(c){c.addEventListener("scroll",r.update,xt)}),f&&s.addEventListener("resize",r.update,xt),function(){a&&l.forEach(function(c){c.removeEventListener("scroll",r.update,xt)}),f&&s.removeEventListener("resize",r.update,xt)}}var mr={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:Cn,data:{}};var Pn={left:"right",right:"left",bottom:"top",top:"bottom"};function Ge(e){return e.replace(/left|right|bottom|top/g,function(t){return Pn[t]})}var Mn={start:"end",end:"start"};function Ot(e){return e.replace(/start|end/g,function(t){return Mn[t]})}function De(e){var t=S(e),r=t.pageXOffset,n=t.pageYOffset;return{scrollLeft:r,scrollTop:n}}function Le(e){return Z(U(e)).left+De(e).scrollLeft}function kt(e,t){var r=S(e),n=U(e),o=r.visualViewport,a=n.clientWidth,p=n.clientHeight,f=0,s=0;if(o){a=o.width,p=o.height;var l=Je();(l||!l&&t==="fixed")&&(f=o.offsetLeft,s=o.offsetTop)}return{width:a,height:p,x:f+Le(e),y:s}}function $t(e){var t,r=U(e),n=De(e),o=(t=e.ownerDocument)==null?void 0:t.body,a=re(r.scrollWidth,r.clientWidth,o?o.scrollWidth:0,o?o.clientWidth:0),p=re(r.scrollHeight,r.clientHeight,o?o.scrollHeight:0,o?o.clientHeight:0),f=-n.scrollLeft+Le(e),s=-n.scrollTop;return z(o||r).direction==="rtl"&&(f+=re(r.clientWidth,o?o.clientWidth:0)-a),{width:a,height:p,x:f,y:s}}function Ie(e){var t=z(e),r=t.overflow,n=t.overflowX,o=t.overflowY;return/auto|scroll|overlay|hidden/.test(r+o+n)}function Et(e){return["html","body","#document"].indexOf(V(e))>=0?e.ownerDocument.body:W(e)&&Ie(e)?e:Et(ge(e))}function we(e,t){var r;t===void 0&&(t=[]);var n=Et(e),o=n===((r=e.ownerDocument)==null?void 0:r.body),a=S(n),p=o?[a].concat(a.visualViewport||[],Ie(n)?n:[]):n,f=t.concat(p);return o?f:f.concat(we(ge(p)))}function _e(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function Sn(e,t){var r=Z(e,!1,t==="fixed");return r.top=r.top+e.clientTop,r.left=r.left+e.clientLeft,r.bottom=r.top+e.clientHeight,r.right=r.left+e.clientWidth,r.width=e.clientWidth,r.height=e.clientHeight,r.x=r.left,r.y=r.top,r}function vr(e,t,r){return t===bt?_e(kt(e,r)):Q(t)?Sn(t,r):_e($t(U(e)))}function An(e){var t=we(ge(e)),r=["absolute","fixed"].indexOf(z(e).position)>=0,n=r&&W(e)?ne(e):e;return Q(n)?t.filter(function(o){return Q(o)&&Qe(o,n)&&V(o)!=="body"}):[]}function Nt(e,t,r,n){var o=t==="clippingParents"?An(e):[].concat(t),a=[].concat(o,[r]),p=a[0],f=a.reduce(function(s,l){var c=vr(e,l,n);return s.top=re(c.top,s.top),s.right=Pe(c.right,s.right),s.bottom=Pe(c.bottom,s.bottom),s.left=re(c.left,s.left),s},vr(e,p,n));return f.width=f.right-f.left,f.height=f.bottom-f.top,f.x=f.left,f.y=f.top,f}function rt(e){var t=e.reference,r=e.element,n=e.placement,o=n?G(n):null,a=n?ee(n):null,p=t.x+t.width/2-r.width/2,f=t.y+t.height/2-r.height/2,s;switch(o){case R:s={x:p,y:t.y-r.height};break;case H:s={x:p,y:t.y+t.height};break;case N:s={x:t.x+t.width,y:f};break;case k:s={x:t.x-r.width,y:f};break;default:s={x:t.x,y:t.y}}var l=o?Se(o):null;if(l!=null){var c=l==="y"?"height":"width";switch(a){case me:s[l]=s[l]-(t[c]/2-r[c]/2);break;case Ce:s[l]=s[l]+(t[c]/2-r[c]/2);break;default:}}return s}function oe(e,t){t===void 0&&(t={});var r=t,n=r.placement,o=n===void 0?e.placement:n,a=r.strategy,p=a===void 0?e.strategy:a,f=r.boundary,s=f===void 0?ar:f,l=r.rootBoundary,c=l===void 0?bt:l,g=r.elementContext,y=g===void 0?He:g,v=r.altBoundary,x=v===void 0?!1:v,b=r.padding,w=b===void 0?0:b,T=et(typeof w!="number"?w:tt(w,be)),P=y===He?sr:He,A=e.rects.popper,i=e.elements[x?P:y],E=Nt(Q(i)?i:i.contextElement||U(e.elements.popper),s,c,p),m=Z(e.elements.reference),M=rt({reference:m,element:A,strategy:"absolute",placement:o}),B=_e(Object.assign({},A,M)),$=y===He?B:m,L={top:E.top-$.top+T.top,bottom:$.bottom-E.bottom+T.bottom,left:E.left-$.left+T.left,right:$.right-E.right+T.right},j=e.modifiersData.offset;if(y===He&&j){var I=j[o];Object.keys(L).forEach(function(D){var Y=[N,H].indexOf(D)>=0?1:-1,K=[R,H].indexOf(D)>=0?"y":"x";L[D]+=I[K]*Y})}return L}function Bt(e,t){t===void 0&&(t={});var r=t,n=r.placement,o=r.boundary,a=r.rootBoundary,p=r.padding,f=r.flipVariations,s=r.allowedAutoPlacements,l=s===void 0?wt:s,c=ee(n),g=c?f?It:It.filter(function(x){return ee(x)===c}):be,y=g.filter(function(x){return l.indexOf(x)>=0});y.length===0&&(y=g);var v=y.reduce(function(x,b){return x[b]=oe(e,{placement:b,boundary:o,rootBoundary:a,padding:p})[G(b)],x},{});return Object.keys(v).sort(function(x,b){return v[x]-v[b]})}function Dn(e){if(G(e)===yt)return[];var t=Ge(e);return[Ot(e),t,Ot(t)]}function Ln(e){var t=e.state,r=e.options,n=e.name;if(!t.modifiersData[n]._skip){for(var o=r.mainAxis,a=o===void 0?!0:o,p=r.altAxis,f=p===void 0?!0:p,s=r.fallbackPlacements,l=r.padding,c=r.boundary,g=r.rootBoundary,y=r.altBoundary,v=r.flipVariations,x=v===void 0?!0:v,b=r.allowedAutoPlacements,w=t.options.placement,T=G(w),P=T===w,A=s||(P||!x?[Ge(w)]:Dn(w)),i=[w].concat(A).reduce(function(ue,te){return ue.concat(G(te)===yt?Bt(t,{placement:te,boundary:c,rootBoundary:g,padding:l,flipVariations:x,allowedAutoPlacements:b}):te)},[]),E=t.rects.reference,m=t.rects.popper,M=new Map,B=!0,$=i[0],L=0;L<i.length;L++){var j=i[L],I=G(j),D=ee(j)===me,Y=[R,H].indexOf(I)>=0,K=Y?"width":"height",F=oe(t,{placement:j,boundary:c,rootBoundary:g,altBoundary:y,padding:l}),q=Y?D?N:k:D?H:R;E[K]>m[K]&&(q=Ge(q));var _=Ge(q),ae=[];if(a&&ae.push(F[I]<=0),f&&ae.push(F[q]<=0,F[_]<=0),ae.every(function(ue){return ue})){$=j,B=!1;break}M.set(j,ae)}if(B)for(var se=x?3:1,xe=function(te){var ce=i.find(function(ke){var le=M.get(ke);if(le)return le.slice(0,te).every(function($e){return $e})});if(ce)return $=ce,"break"},pe=se;pe>0;pe--){var Oe=xe(pe);if(Oe==="break")break}t.placement!==$&&(t.modifiersData[n]._skip=!0,t.placement=$,t.reset=!0)}}var gr={name:"flip",enabled:!0,phase:"main",fn:Ln,requiresIfExists:["offset"],data:{_skip:!1}};function hr(e,t,r){return r===void 0&&(r={x:0,y:0}),{top:e.top-t.height-r.y,right:e.right-t.width+r.x,bottom:e.bottom-t.height+r.y,left:e.left-t.width-r.x}}function yr(e){return[R,N,H,k].some(function(t){return e[t]>=0})}function In(e){var t=e.state,r=e.name,n=t.rects.reference,o=t.rects.popper,a=t.modifiersData.preventOverflow,p=oe(t,{elementContext:"reference"}),f=oe(t,{altBoundary:!0}),s=hr(p,n),l=hr(f,o,a),c=yr(s),g=yr(l);t.modifiersData[r]={referenceClippingOffsets:s,popperEscapeOffsets:l,isReferenceHidden:c,hasPopperEscaped:g},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":c,"data-popper-escaped":g})}var br={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:In};function Rn(e,t,r){var n=G(e),o=[k,R].indexOf(n)>=0?-1:1,a=typeof r=="function"?r(Object.assign({},t,{placement:e})):r,p=a[0],f=a[1];return p=p||0,f=(f||0)*o,[k,N].indexOf(n)>=0?{x:f,y:p}:{x:p,y:f}}function kn(e){var t=e.state,r=e.options,n=e.name,o=r.offset,a=o===void 0?[0,0]:o,p=wt.reduce(function(c,g){return c[g]=Rn(g,t.rects,a),c},{}),f=p[t.placement],s=f.x,l=f.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=s,t.modifiersData.popperOffsets.y+=l),t.modifiersData[n]=p}var wr={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:kn};function $n(e){var t=e.state,r=e.name;t.modifiersData[r]=rt({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}var xr={name:"popperOffsets",enabled:!0,phase:"read",fn:$n,data:{}};function jt(e){return e==="x"?"y":"x"}function Nn(e){var t=e.state,r=e.options,n=e.name,o=r.mainAxis,a=o===void 0?!0:o,p=r.altAxis,f=p===void 0?!1:p,s=r.boundary,l=r.rootBoundary,c=r.altBoundary,g=r.padding,y=r.tether,v=y===void 0?!0:y,x=r.tetherOffset,b=x===void 0?0:x,w=oe(t,{boundary:s,rootBoundary:l,padding:g,altBoundary:c}),T=G(t.placement),P=ee(t.placement),A=!P,i=Se(T),E=jt(i),m=t.modifiersData.popperOffsets,M=t.rects.reference,B=t.rects.popper,$=typeof b=="function"?b(Object.assign({},t.rects,{placement:t.placement})):b,L=typeof $=="number"?{mainAxis:$,altAxis:$}:Object.assign({mainAxis:0,altAxis:0},$),j=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,I={x:0,y:0};if(m){if(a){var D,Y=i==="y"?R:k,K=i==="y"?H:N,F=i==="y"?"height":"width",q=m[i],_=q+w[Y],ae=q-w[K],se=v?-B[F]/2:0,xe=P===me?M[F]:B[F],pe=P===me?-B[F]:-M[F],Oe=t.elements.arrow,ue=v&&Oe?Me(Oe):{width:0,height:0},te=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:Ze(),ce=te[Y],ke=te[K],le=Ae(0,M[F],ue[F]),$e=A?M[F]/2-se-le-ce-L.mainAxis:xe-le-ce-L.mainAxis,he=A?-M[F]/2+se+le+ke+L.mainAxis:pe+le+ke+L.mainAxis,Ne=t.elements.arrow&&ne(t.elements.arrow),st=Ne?i==="y"?Ne.clientTop||0:Ne.clientLeft||0:0,Fe=(D=j?.[i])!=null?D:0,pt=q+$e-Fe-st,ft=q+he-Fe,qe=Ae(v?Pe(_,pt):_,q,v?re(ae,ft):ae);m[i]=qe,I[i]=qe-q}if(f){var Xe,ut=i==="x"?R:k,ct=i==="x"?H:N,de=m[E],ye=E==="y"?"height":"width",ze=de+w[ut],Ee=de-w[ct],Ye=[R,k].indexOf(T)!==-1,lt=(Xe=j?.[E])!=null?Xe:0,dt=Ye?ze:de-M[ye]-B[ye]-lt+L.altAxis,mt=Ye?de+M[ye]+B[ye]-lt-L.altAxis:Ee,vt=v&&Ye?ur(dt,de,mt):Ae(v?dt:ze,de,v?mt:Ee);m[E]=vt,I[E]=vt-de}t.modifiersData[n]=I}}var Or={name:"preventOverflow",enabled:!0,phase:"main",fn:Nn,requiresIfExists:["offset"]};function Ht(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function Wt(e){return e===S(e)||!W(e)?De(e):Ht(e)}function Bn(e){var t=e.getBoundingClientRect(),r=ve(t.width)/e.offsetWidth||1,n=ve(t.height)/e.offsetHeight||1;return r!==1||n!==1}function Vt(e,t,r){r===void 0&&(r=!1);var n=W(t),o=W(t)&&Bn(t),a=U(t),p=Z(e,o,r),f={scrollLeft:0,scrollTop:0},s={x:0,y:0};return(n||!n&&!r)&&((V(t)!=="body"||Ie(a))&&(f=Wt(t)),W(t)?(s=Z(t,!0),s.x+=t.clientLeft,s.y+=t.clientTop):a&&(s.x=Le(a))),{x:p.left+f.scrollLeft-s.x,y:p.top+f.scrollTop-s.y,width:p.width,height:p.height}}function jn(e){var t=new Map,r=new Set,n=[];e.forEach(function(a){t.set(a.name,a)});function o(a){r.add(a.name);var p=[].concat(a.requires||[],a.requiresIfExists||[]);p.forEach(function(f){if(!r.has(f)){var s=t.get(f);s&&o(s)}}),n.push(a)}return e.forEach(function(a){r.has(a.name)||o(a)}),n}function Gt(e){var t=jn(e);return pr.reduce(function(r,n){return r.concat(t.filter(function(o){return o.phase===n}))},[])}function _t(e){var t;return function(){return t||(t=new Promise(function(r){Promise.resolve().then(function(){t=void 0,r(e())})})),t}}function Ut(e){var t=e.reduce(function(r,n){var o=r[n.name];return r[n.name]=o?Object.assign({},o,n,{options:Object.assign({},o.options,n.options),data:Object.assign({},o.data,n.data)}):n,r},{});return Object.keys(t).map(function(r){return t[r]})}var Er={placement:"bottom",modifiers:[],strategy:"absolute"};function Tr(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return!t.some(function(n){return!(n&&typeof n.getBoundingClientRect=="function")})}function Cr(e){e===void 0&&(e={});var t=e,r=t.defaultModifiers,n=r===void 0?[]:r,o=t.defaultOptions,a=o===void 0?Er:o;return function(f,s,l){l===void 0&&(l=a);var c={placement:"bottom",orderedModifiers:[],options:Object.assign({},Er,a),modifiersData:{},elements:{reference:f,popper:s},attributes:{},styles:{}},g=[],y=!1,v={state:c,setOptions:function(T){var P=typeof T=="function"?T(c.options):T;b(),c.options=Object.assign({},a,c.options,P),c.scrollParents={reference:Q(f)?we(f):f.contextElement?we(f.contextElement):[],popper:we(s)};var A=Gt(Ut([].concat(n,c.options.modifiers)));return c.orderedModifiers=A.filter(function(i){return i.enabled}),x(),v.update()},forceUpdate:function(){if(!y){var T=c.elements,P=T.reference,A=T.popper;if(Tr(P,A)){c.rects={reference:Vt(P,ne(A),c.options.strategy==="fixed"),popper:Me(A)},c.reset=!1,c.placement=c.options.placement,c.orderedModifiers.forEach(function(L){return c.modifiersData[L.name]=Object.assign({},L.data)});for(var i=0;i<c.orderedModifiers.length;i++){if(c.reset===!0){c.reset=!1,i=-1;continue}var E=c.orderedModifiers[i],m=E.fn,M=E.options,B=M===void 0?{}:M,$=E.name;typeof m=="function"&&(c=m({state:c,options:B,name:$,instance:v})||c)}}}},update:_t(function(){return new Promise(function(w){v.forceUpdate(),w(c)})}),destroy:function(){b(),y=!0}};if(!Tr(f,s))return v;v.setOptions(l).then(function(w){!y&&l.onFirstUpdate&&l.onFirstUpdate(w)});function x(){c.orderedModifiers.forEach(function(w){var T=w.name,P=w.options,A=P===void 0?{}:P,i=w.effect;if(typeof i=="function"){var E=i({state:c,name:T,instance:v,options:A}),m=function(){};g.push(E||m)}})}function b(){g.forEach(function(w){return w()}),g=[]}return v}}var Hn=[mr,xr,dr,Ke,wr,gr,Or,cr,br],Ft=Cr({defaultModifiers:Hn});var Wn="tippy-box",$r="tippy-content",Vn="tippy-backdrop",Nr="tippy-arrow",Br="tippy-svg-arrow",Re={passive:!0,capture:!0},jr=function(){return document.body};function qt(e,t,r){if(Array.isArray(e)){var n=e[t];return n??(Array.isArray(r)?r[t]:r)}return e}function Qt(e,t){var r={}.toString.call(e);return r.indexOf("[object")===0&&r.indexOf(t+"]")>-1}function Hr(e,t){return typeof e=="function"?e.apply(void 0,t):e}function Pr(e,t){if(t===0)return e;var r;return function(n){clearTimeout(r),r=setTimeout(function(){e(n)},t)}}function Gn(e){return e.split(/\s+/).filter(Boolean)}function Ue(e){return[].concat(e)}function Mr(e,t){e.indexOf(t)===-1&&e.push(t)}function _n(e){return e.filter(function(t,r){return e.indexOf(t)===r})}function Un(e){return e.split("-")[0]}function Ct(e){return[].slice.call(e)}function Sr(e){return Object.keys(e).reduce(function(t,r){return e[r]!==void 0&&(t[r]=e[r]),t},{})}function nt(){return document.createElement("div")}function Pt(e){return["Element","Fragment"].some(function(t){return Qt(e,t)})}function Fn(e){return Qt(e,"NodeList")}function qn(e){return Qt(e,"MouseEvent")}function Xn(e){return!!(e&&e._tippy&&e._tippy.reference===e)}function zn(e){return Pt(e)?[e]:Fn(e)?Ct(e):Array.isArray(e)?e:Ct(document.querySelectorAll(e))}function Xt(e,t){e.forEach(function(r){r&&(r.style.transitionDuration=t+"ms")})}function Ar(e,t){e.forEach(function(r){r&&r.setAttribute("data-state",t)})}function Yn(e){var t,r=Ue(e),n=r[0];return n!=null&&(t=n.ownerDocument)!=null&&t.body?n.ownerDocument:document}function Kn(e,t){var r=t.clientX,n=t.clientY;return e.every(function(o){var a=o.popperRect,p=o.popperState,f=o.props,s=f.interactiveBorder,l=Un(p.placement),c=p.modifiersData.offset;if(!c)return!0;var g=l==="bottom"?c.top.y:0,y=l==="top"?c.bottom.y:0,v=l==="right"?c.left.x:0,x=l==="left"?c.right.x:0,b=a.top-n+g>s,w=n-a.bottom-y>s,T=a.left-r+v>s,P=r-a.right-x>s;return b||w||T||P})}function zt(e,t,r){var n=t+"EventListener";["transitionend","webkitTransitionEnd"].forEach(function(o){e[n](o,r)})}function Dr(e,t){for(var r=t;r;){var n;if(e.contains(r))return!0;r=r.getRootNode==null||(n=r.getRootNode())==null?void 0:n.host}return!1}var fe={isTouch:!1},Lr=0;function Jn(){fe.isTouch||(fe.isTouch=!0,window.performance&&document.addEventListener("mousemove",Wr))}function Wr(){var e=performance.now();e-Lr<20&&(fe.isTouch=!1,document.removeEventListener("mousemove",Wr)),Lr=e}function Qn(){var e=document.activeElement;if(Xn(e)){var t=e._tippy;e.blur&&!t.state.isVisible&&e.blur()}}function Zn(){document.addEventListener("touchstart",Jn,Re),window.addEventListener("blur",Qn)}var eo=typeof window<"u"&&typeof document<"u",to=eo?!!window.msCrypto:!1;var ro={animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},no={allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999},ie=Object.assign({appendTo:jr,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},ro,no),oo=Object.keys(ie),io=function(t){var r=Object.keys(t);r.forEach(function(n){ie[n]=t[n]})};function Vr(e){var t=e.plugins||[],r=t.reduce(function(n,o){var a=o.name,p=o.defaultValue;if(a){var f;n[a]=e[a]!==void 0?e[a]:(f=ie[a])!=null?f:p}return n},{});return Object.assign({},e,r)}function ao(e,t){var r=t?Object.keys(Vr(Object.assign({},ie,{plugins:t}))):oo,n=r.reduce(function(o,a){var p=(e.getAttribute("data-tippy-"+a)||"").trim();if(!p)return o;if(a==="content")o[a]=p;else try{o[a]=JSON.parse(p)}catch{o[a]=p}return o},{});return n}function Ir(e,t){var r=Object.assign({},t,{content:Hr(t.content,[e])},t.ignoreAttributes?{}:ao(e,t.plugins));return r.aria=Object.assign({},ie.aria,r.aria),r.aria={expanded:r.aria.expanded==="auto"?t.interactive:r.aria.expanded,content:r.aria.content==="auto"?t.interactive?null:"describedby":r.aria.content},r}var so=function(){return"innerHTML"};function Kt(e,t){e[so()]=t}function Rr(e){var t=nt();return e===!0?t.className=Nr:(t.className=Br,Pt(e)?t.appendChild(e):Kt(t,e)),t}function kr(e,t){Pt(t.content)?(Kt(e,""),e.appendChild(t.content)):typeof t.content!="function"&&(t.allowHTML?Kt(e,t.content):e.textContent=t.content)}function Jt(e){var t=e.firstElementChild,r=Ct(t.children);return{box:t,content:r.find(function(n){return n.classList.contains($r)}),arrow:r.find(function(n){return n.classList.contains(Nr)||n.classList.contains(Br)}),backdrop:r.find(function(n){return n.classList.contains(Vn)})}}function Gr(e){var t=nt(),r=nt();r.className=Wn,r.setAttribute("data-state","hidden"),r.setAttribute("tabindex","-1");var n=nt();n.className=$r,n.setAttribute("data-state","hidden"),kr(n,e.props),t.appendChild(r),r.appendChild(n),o(e.props,e.props);function o(a,p){var f=Jt(t),s=f.box,l=f.content,c=f.arrow;p.theme?s.setAttribute("data-theme",p.theme):s.removeAttribute("data-theme"),typeof p.animation=="string"?s.setAttribute("data-animation",p.animation):s.removeAttribute("data-animation"),p.inertia?s.setAttribute("data-inertia",""):s.removeAttribute("data-inertia"),s.style.maxWidth=typeof p.maxWidth=="number"?p.maxWidth+"px":p.maxWidth,p.role?s.setAttribute("role",p.role):s.removeAttribute("role"),(a.content!==p.content||a.allowHTML!==p.allowHTML)&&kr(l,e.props),p.arrow?c?a.arrow!==p.arrow&&(s.removeChild(c),s.appendChild(Rr(p.arrow))):s.appendChild(Rr(p.arrow)):c&&s.removeChild(c)}return{popper:t,onUpdate:o}}Gr.$$tippy=!0;var po=1,Tt=[],Yt=[];function fo(e,t){var r=Ir(e,Object.assign({},ie,Vr(Sr(t)))),n,o,a,p=!1,f=!1,s=!1,l=!1,c,g,y,v=[],x=Pr(pt,r.interactiveDebounce),b,w=po++,T=null,P=_n(r.plugins),A={isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},i={id:w,reference:e,popper:nt(),popperInstance:T,props:r,state:A,plugins:P,clearDelayTimeouts:dt,setProps:mt,setContent:vt,show:en,hide:tn,hideWithInteractivity:rn,enable:Ye,disable:lt,unmount:nn,destroy:on};if(!r.render)return i;var E=r.render(i),m=E.popper,M=E.onUpdate;m.setAttribute("data-tippy-root",""),m.id="tippy-"+i.id,i.popper=m,e._tippy=i,m._tippy=i;var B=P.map(function(u){return u.fn(i)}),$=e.hasAttribute("aria-expanded");return Ne(),se(),q(),_("onCreate",[i]),r.showOnCreate&&ze(),m.addEventListener("mouseenter",function(){i.props.interactive&&i.state.isVisible&&i.clearDelayTimeouts()}),m.addEventListener("mouseleave",function(){i.props.interactive&&i.props.trigger.indexOf("mouseenter")>=0&&Y().addEventListener("mousemove",x)}),i;function L(){var u=i.props.touch;return Array.isArray(u)?u:[u,0]}function j(){return L()[0]==="hold"}function I(){var u;return!!((u=i.props.render)!=null&&u.$$tippy)}function D(){return b||e}function Y(){var u=D().parentNode;return u?Yn(u):document}function K(){return Jt(m)}function F(u){return i.state.isMounted&&!i.state.isVisible||fe.isTouch||c&&c.type==="focus"?0:qt(i.props.delay,u?0:1,ie.delay)}function q(u){u===void 0&&(u=!1),m.style.pointerEvents=i.props.interactive&&!u?"":"none",m.style.zIndex=""+i.props.zIndex}function _(u,d,h){if(h===void 0&&(h=!0),B.forEach(function(O){O[u]&&O[u].apply(O,d)}),h){var C;(C=i.props)[u].apply(C,d)}}function ae(){var u=i.props.aria;if(u.content){var d="aria-"+u.content,h=m.id,C=Ue(i.props.triggerTarget||e);C.forEach(function(O){var X=O.getAttribute(d);if(i.state.isVisible)O.setAttribute(d,X?X+" "+h:h);else{var J=X&&X.replace(h,"").trim();J?O.setAttribute(d,J):O.removeAttribute(d)}})}}function se(){if(!($||!i.props.aria.expanded)){var u=Ue(i.props.triggerTarget||e);u.forEach(function(d){i.props.interactive?d.setAttribute("aria-expanded",i.state.isVisible&&d===D()?"true":"false"):d.removeAttribute("aria-expanded")})}}function xe(){Y().removeEventListener("mousemove",x),Tt=Tt.filter(function(u){return u!==x})}function pe(u){if(!(fe.isTouch&&(s||u.type==="mousedown"))){var d=u.composedPath&&u.composedPath()[0]||u.target;if(!(i.props.interactive&&Dr(m,d))){if(Ue(i.props.triggerTarget||e).some(function(h){return Dr(h,d)})){if(fe.isTouch||i.state.isVisible&&i.props.trigger.indexOf("click")>=0)return}else _("onClickOutside",[i,u]);i.props.hideOnClick===!0&&(i.clearDelayTimeouts(),i.hide(),f=!0,setTimeout(function(){f=!1}),i.state.isMounted||ce())}}}function Oe(){s=!0}function ue(){s=!1}function te(){var u=Y();u.addEventListener("mousedown",pe,!0),u.addEventListener("touchend",pe,Re),u.addEventListener("touchstart",ue,Re),u.addEventListener("touchmove",Oe,Re)}function ce(){var u=Y();u.removeEventListener("mousedown",pe,!0),u.removeEventListener("touchend",pe,Re),u.removeEventListener("touchstart",ue,Re),u.removeEventListener("touchmove",Oe,Re)}function ke(u,d){$e(u,function(){!i.state.isVisible&&m.parentNode&&m.parentNode.contains(m)&&d()})}function le(u,d){$e(u,d)}function $e(u,d){var h=K().box;function C(O){O.target===h&&(zt(h,"remove",C),d())}if(u===0)return d();zt(h,"remove",g),zt(h,"add",C),g=C}function he(u,d,h){h===void 0&&(h=!1);var C=Ue(i.props.triggerTarget||e);C.forEach(function(O){O.addEventListener(u,d,h),v.push({node:O,eventType:u,handler:d,options:h})})}function Ne(){j()&&(he("touchstart",Fe,{passive:!0}),he("touchend",ft,{passive:!0})),Gn(i.props.trigger).forEach(function(u){if(u!=="manual")switch(he(u,Fe),u){case"mouseenter":he("mouseleave",ft);break;case"focus":he(to?"focusout":"blur",qe);break;case"focusin":he("focusout",qe);break}})}function st(){v.forEach(function(u){var d=u.node,h=u.eventType,C=u.handler,O=u.options;d.removeEventListener(h,C,O)}),v=[]}function Fe(u){var d,h=!1;if(!(!i.state.isEnabled||Xe(u)||f)){var C=((d=c)==null?void 0:d.type)==="focus";c=u,b=u.currentTarget,se(),!i.state.isVisible&&qn(u)&&Tt.forEach(function(O){return O(u)}),u.type==="click"&&(i.props.trigger.indexOf("mouseenter")<0||p)&&i.props.hideOnClick!==!1&&i.state.isVisible?h=!0:ze(u),u.type==="click"&&(p=!h),h&&!C&&Ee(u)}}function pt(u){var d=u.target,h=D().contains(d)||m.contains(d);if(!(u.type==="mousemove"&&h)){var C=ye().concat(m).map(function(O){var X,J=O._tippy,Be=(X=J.popperInstance)==null?void 0:X.state;return Be?{popperRect:O.getBoundingClientRect(),popperState:Be,props:r}:null}).filter(Boolean);Kn(C,u)&&(xe(),Ee(u))}}function ft(u){var d=Xe(u)||i.props.trigger.indexOf("click")>=0&&p;if(!d){if(i.props.interactive){i.hideWithInteractivity(u);return}Ee(u)}}function qe(u){i.props.trigger.indexOf("focusin")<0&&u.target!==D()||i.props.interactive&&u.relatedTarget&&m.contains(u.relatedTarget)||Ee(u)}function Xe(u){return fe.isTouch?j()!==u.type.indexOf("touch")>=0:!1}function ut(){ct();var u=i.props,d=u.popperOptions,h=u.placement,C=u.offset,O=u.getReferenceClientRect,X=u.moveTransition,J=I()?Jt(m).arrow:null,Be=O?{getBoundingClientRect:O,contextElement:O.contextElement||D()}:e,ir={name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(gt){var je=gt.state;if(I()){var an=K(),Lt=an.box;["placement","reference-hidden","escaped"].forEach(function(ht){ht==="placement"?Lt.setAttribute("data-placement",je.placement):je.attributes.popper["data-popper-"+ht]?Lt.setAttribute("data-"+ht,""):Lt.removeAttribute("data-"+ht)}),je.attributes.popper={}}}},Te=[{name:"offset",options:{offset:C}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!X}},ir];I()&&J&&Te.push({name:"arrow",options:{element:J,padding:3}}),Te.push.apply(Te,d?.modifiers||[]),i.popperInstance=Ft(Be,m,Object.assign({},d,{placement:h,onFirstUpdate:y,modifiers:Te}))}function ct(){i.popperInstance&&(i.popperInstance.destroy(),i.popperInstance=null)}function de(){var u=i.props.appendTo,d,h=D();i.props.interactive&&u===jr||u==="parent"?d=h.parentNode:d=Hr(u,[h]),d.contains(m)||d.appendChild(m),i.state.isMounted=!0,ut()}function ye(){return Ct(m.querySelectorAll("[data-tippy-root]"))}function ze(u){i.clearDelayTimeouts(),u&&_("onTrigger",[i,u]),te();var d=F(!0),h=L(),C=h[0],O=h[1];fe.isTouch&&C==="hold"&&O&&(d=O),d?n=setTimeout(function(){i.show()},d):i.show()}function Ee(u){if(i.clearDelayTimeouts(),_("onUntrigger",[i,u]),!i.state.isVisible){ce();return}if(!(i.props.trigger.indexOf("mouseenter")>=0&&i.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(u.type)>=0&&p)){var d=F(!1);d?o=setTimeout(function(){i.state.isVisible&&i.hide()},d):a=requestAnimationFrame(function(){i.hide()})}}function Ye(){i.state.isEnabled=!0}function lt(){i.hide(),i.state.isEnabled=!1}function dt(){clearTimeout(n),clearTimeout(o),cancelAnimationFrame(a)}function mt(u){if(!i.state.isDestroyed){_("onBeforeUpdate",[i,u]),st();var d=i.props,h=Ir(e,Object.assign({},d,Sr(u),{ignoreAttributes:!0}));i.props=h,Ne(),d.interactiveDebounce!==h.interactiveDebounce&&(xe(),x=Pr(pt,h.interactiveDebounce)),d.triggerTarget&&!h.triggerTarget?Ue(d.triggerTarget).forEach(function(C){C.removeAttribute("aria-expanded")}):h.triggerTarget&&e.removeAttribute("aria-expanded"),se(),q(),M&&M(d,h),i.popperInstance&&(ut(),ye().forEach(function(C){requestAnimationFrame(C._tippy.popperInstance.forceUpdate)})),_("onAfterUpdate",[i,u])}}function vt(u){i.setProps({content:u})}function en(){var u=i.state.isVisible,d=i.state.isDestroyed,h=!i.state.isEnabled,C=fe.isTouch&&!i.props.touch,O=qt(i.props.duration,0,ie.duration);if(!(u||d||h||C)&&!D().hasAttribute("disabled")&&(_("onShow",[i],!1),i.props.onShow(i)!==!1)){if(i.state.isVisible=!0,I()&&(m.style.visibility="visible"),q(),te(),i.state.isMounted||(m.style.transition="none"),I()){var X=K(),J=X.box,Be=X.content;Xt([J,Be],0)}y=function(){var Te;if(!(!i.state.isVisible||l)){if(l=!0,m.offsetHeight,m.style.transition=i.props.moveTransition,I()&&i.props.animation){var Dt=K(),gt=Dt.box,je=Dt.content;Xt([gt,je],O),Ar([gt,je],"visible")}ae(),se(),Mr(Yt,i),(Te=i.popperInstance)==null||Te.forceUpdate(),_("onMount",[i]),i.props.animation&&I()&&le(O,function(){i.state.isShown=!0,_("onShown",[i])})}},de()}}function tn(){var u=!i.state.isVisible,d=i.state.isDestroyed,h=!i.state.isEnabled,C=qt(i.props.duration,1,ie.duration);if(!(u||d||h)&&(_("onHide",[i],!1),i.props.onHide(i)!==!1)){if(i.state.isVisible=!1,i.state.isShown=!1,l=!1,p=!1,I()&&(m.style.visibility="hidden"),xe(),ce(),q(!0),I()){var O=K(),X=O.box,J=O.content;i.props.animation&&(Xt([X,J],C),Ar([X,J],"hidden"))}ae(),se(),i.props.animation?I()&&ke(C,i.unmount):i.unmount()}}function rn(u){Y().addEventListener("mousemove",x),Mr(Tt,x),x(u)}function nn(){i.state.isVisible&&i.hide(),i.state.isMounted&&(ct(),ye().forEach(function(u){u._tippy.unmount()}),m.parentNode&&m.parentNode.removeChild(m),Yt=Yt.filter(function(u){return u!==i}),i.state.isMounted=!1,_("onHidden",[i]))}function on(){i.state.isDestroyed||(i.clearDelayTimeouts(),i.unmount(),st(),delete e._tippy,i.state.isDestroyed=!0,_("onDestroy",[i]))}}function ot(e,t){t===void 0&&(t={});var r=ie.plugins.concat(t.plugins||[]);Zn();var n=Object.assign({},t,{plugins:r}),o=zn(e);if(0)var a,p;var f=o.reduce(function(s,l){var c=l&&fo(l,n);return c&&s.push(c),s},[]);return Pt(e)?f[0]:f}ot.defaultProps=ie;ot.setDefaultProps=io;ot.currentInput=fe;var gp=Object.assign({},Ke,{effect:function(t){var r=t.state,n={popper:{position:r.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(r.elements.popper.style,n.popper),r.styles=n,r.elements.arrow&&Object.assign(r.elements.arrow.style,n.arrow)}});ot.setDefaultProps({render:Gr});var Mt=ot;var it={selector:".gene-tooltip",api:"mygene",prefetch:"smart",prefetchThreshold:15,truncateSummary:4,display:{species:!0,location:!0,ideogram:!0,pathways:!0,domains:!0},ideogram:{enabled:!0,height:100,showLabels:!1},pathwaySource:"reactome",pathwayCount:3,domainCount:3,tippyOptions:{allowHTML:!0,interactive:!0,placement:"bottom",theme:"light"}};var Zt=new Map,er=(e,t)=>`${e}_${t}`,_r=(e,t)=>Zt.has(er(e,t)),tr=(e,t)=>Zt.get(er(e,t)),rr=(e,t,r)=>{Zt.set(er(e,t),r)},Ur=(e,t)=>{e.forEach((r,n)=>{rr(n,t,r)})};async function St(e,t){if(!e||e.length===0)return new Map;console.log(`Making BATCH request for ${e.length} genes in species: ${t}`);let r="https://mygene.info/v3/query",n=e.join(","),o=["_id","query","symbol","name","summary","taxid","genomic_pos","pathway","interpro"].join(",");try{let a=await fetch(r,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:`q=${n}&species=${t}&scopes=symbol&fields=${o}`});if(!a.ok)throw new Error(`HTTP error! status: ${a.status}`);let p=await a.json(),f=new Map;for(let s of p)s.notfound||f.set(s.query,s);return f}catch(a){return console.error("Batch fetch failed:",a),new Map}}var qr=[{key:"ncbi",name:"NCBI",url:e=>`https://www.ncbi.nlm.nih.gov/gene/${e}`,requires:"id"},{key:"ensembl",name:"Ensembl",url:e=>`https://www.ensembl.org/id/${e}`,requires:"id"},{key:"genecards",name:"GeneCards",url:e=>`https://www.genecards.org/cgi-bin/carddisp.pl?gene=${e}`,requires:"symbol"}];var uo={9606:{common:"Human",genus:"Homo sapiens",icon:"\u{1F9D1}"},10090:{common:"Mouse",genus:"Mus musculus",icon:"\u{1F42D}"},10116:{common:"Rat",genus:"Rattus norvegicus",icon:"\u{1F400}"},7227:{common:"Fruitfly",genus:"Drosophila melanogaster",icon:"\u{1FAB0}"},6239:{common:"Nematode",genus:"Caenorhabditis elegans",icon:"\u{1FAB1}"},7955:{common:"Zebrafish",genus:"Danio rerio",icon:"\u{1F41F}"},3702:{common:"Thale-cress",genus:"Arabidopsis thaliana",icon:"\u{1F331}"},8364:{common:"Frog",genus:"Xenopus tropicalis",icon:"\u{1F438}"},9823:{common:"Pig",genus:"Sus scrofa",icon:"\u{1F416}"}};function co(e){let t=uo[e]??{common:"Unknown",genus:"",icon:"\u2753"};return`
    <div class="gene-tooltip-section gene-tooltip-species">
      <span class="gene-tooltip-species-icon">${t.icon}</span>
      <span>${t.common}, <em>${t.genus}</em></span>
    </div>
  `}function lo(e,t=!1,r=""){if(!e)return"";let n=Array.isArray(e)?e[0]:e;if(!n)return"";let o=n.start.toLocaleString(),a=n.end.toLocaleString();return`
      <div class="gene-tooltip-section gene-tooltip-location">
        <div>
          <span class="gene-tooltip-location-label">Location:</span>
          <span>chr${n.chr}:${o}-${a}</span>
        </div>
        ${t?`<div class="gene-tooltip-ideo" id="gene-tooltip-ideo-${r}"></div>`:""}
      </div>
    `}function Xr(e,t,r,n){if(!t||t.length===0)return"";let o=t.slice(0,r),a=t.length-r,p=o.map(s=>`
      <li>
        <a href="${s.url}" target="_blank" rel="noopener noreferrer">${s.name}</a>
      </li>
    `).join(""),f=a>0?`<span id="${n}" class="gene-tooltip-more-btn" data-more-count="${a}">
         ... and ${a} more
       </span>`:"";return a>0,`
    <div class="gene-tooltip-section gene-tooltip-list-section">
      <div class="gene-tooltip-list-header">${e}</div>
      <ul>${p}</ul>
      ${f}
    </div>
  `}function mo(e,t,r){let n=e.pathway?.[t];if(!n)return"";let o=(Array.isArray(n)?n:[n]).map(p=>{let f="#";return t==="reactome"&&(f=`https://reactome.org/content/detail/${p.id}`),t==="kegg"&&(f=`https://www.genome.jp/dbget-bin/www_bget?path:${p.id}`),t==="wikipathways"&&(f=`https://www.wikipathways.org/pathways/${p.id}`),{name:p.name,url:f}}).sort((p,f)=>p.name.localeCompare(f.name)),a=`pathways-more-${e._id}`;return Xr("Pathways",o,r,a)}function vo(e,t){let r=e.interpro;if(!r)return"";let n=(Array.isArray(r)?r:[r]).map(a=>({name:a.short_desc,url:`https://www.ebi.ac.uk/interpro/entry/InterPro/${a.id}`})).sort((a,p)=>a.name.localeCompare(p.name)),o=`domains-more-${e._id}`;return Xr("Protein Domains",n,t,o)}function nr(e,t={}){if(!e)return"<p>Gene not found.</p>";let{sources:r=["ncbi"],truncate:n=5,display:o={},pathwaySource:a="reactome",pathwayCount:p=3,domainCount:f=3}=t,s=qr.filter(v=>r.includes(v.key)).map(v=>v.requires==="id"&&!e._id||v.requires==="symbol"&&!e.symbol?"":`<a href="${v.url(e._id||e.symbol)}"
                 target="_blank"
                 rel="noopener noreferrer">
                ${v.name}
              </a>`).filter(Boolean).join(" | "),l=e.summary||"No summary available.",c=n&&l.length>0?"gene-tooltip-summary":"gene-tooltip-summary-full",g=n?'tabindex="0"':"",y=n?`style="--line-clamp: ${n};"`:"";return`
    <div class="gene-tooltip-content" style="text-align: left; max-width: 300px;">
      <div class="gene-tooltip-header">
        <strong>
          <a href="https://www.ncbi.nlm.nih.gov/gene/${e._id}" 
             target="_blank" 
             rel="noopener noreferrer"
             class="gene-tooltip-link">
            ${e.symbol}
          </a>
        </strong>
        <span class="gene-tooltip-name">(${e.name})</span>
      </div>

      ${o.species!==!1&&e.taxid?co(e.taxid):""}
      ${o.location!==!1?lo(e.genomic_pos,o.ideogram,e._id):""}
      
      <p class="${c}" ${g} ${y}>${l}</p>

      ${o.pathways!==!1?mo(e,a,p):""}
      ${o.domains!==!1?vo(e,f):""}
      
      ${s?`<div class="gene-tooltip-links">${s}</div>`:""}
    </div>
  `}function zr(e){let t=Array.from(document.querySelectorAll(e)),r=[],n=/[,\s;]+/;return t.forEach(o=>{let p=(o.textContent||"").trim().split(n).filter(Boolean);if(p.length>1){let f=o.dataset.species;if(!f){console.warn("Gene list container found without a data-species attribute. Skipping.",o);return}o.innerHTML="",p.forEach((s,l)=>{let c=document.createElement("span");c.textContent=s,c.dataset.species=f;let g=e.startsWith(".")?e.substring(1):e;c.classList.add(g),o.appendChild(c),r.push(c),l<p.length-1&&o.appendChild(document.createTextNode(", "))})}else p.length===1&&(o.textContent=p[0],r.push(o))}),r}function at(e){let t=e.textContent?.trim(),r=e.dataset.species;return!t||!r?null:{symbol:t,species:r}}function Yr(e){let t=new Map;return e.forEach(r=>{let n=at(r);!n||_r(n.symbol,n.species)||(t.has(n.species)||t.set(n.species,new Set),t.get(n.species).add(n.symbol))}),t}async function Kr(e){let t=Array.from(e.entries()).map(([r,n])=>St(Array.from(n),r).then(o=>Ur(o,r)));await Promise.all(t)}function go(e){let t=Yr(e);Kr(t)}function ho(e){let t=new Set,r=null,n=()=>{if(t.size===0)return;let a=Yr(Array.from(t));Kr(a),t.clear()},o=new IntersectionObserver((a,p)=>{a.forEach(f=>{f.isIntersecting&&(t.add(f.target),p.unobserve(f.target),r&&clearTimeout(r),r=setTimeout(n,200))})},{rootMargin:"200px"});e.forEach(a=>o.observe(a))}function Jr(e,t,r){let n=t.length;e==="all"||e==="smart"&&n<=r?(console.log(`Prefetching all ${n} genes.`),go(t)):e==="smart"&&n>r&&(console.log("Using 'smart' prefetch strategy with IntersectionObserver."),ho(t))}function Qr(){document.addEventListener("click",e=>{let t=e.target;t.classList.contains("gene-tooltip-summary")&&t.classList.toggle("expanded")}),document.addEventListener("keydown",e=>{let t=e.target;t?.classList.contains("gene-tooltip-summary")&&(e.key==="Enter"||e.key===" ")&&(e.preventDefault(),t.classList.toggle("expanded"))})}var At=null;async function yo(){if(At)return At;if(window.Ideogram)return Promise.resolve(window.Ideogram);if(typeof window<"u"&&typeof document<"u"&&typeof window.GeneTooltip<"u"){let t=`[GeneTooltip] Ideogram global variable not found.
Please ensure the Ideogram script is loaded on the page
before initializing GeneTooltip, or use the ESM/CJS build.`;return console.error(t),Promise.reject(new Error(t))}return At=import("ideogram").then(t=>t.default).catch(t=>{let r=`[GeneTooltip] Failed to load Ideogram. 
Please ensure 'ideogram' is installed (it's a peer dependency).`;return console.error(r,t),Promise.reject(new Error(r))}),At}async function or(e,t,r){console.log("[GeneTooltip] Starting renderIdeogram for:",t.symbol);let n=e.popper.querySelector(".gene-tooltip-ideo");try{let o=await yo();if(!o){n&&(n.innerHTML="<small>Ideogram unavailable</small>");return}let a=`#gene-tooltip-ideo-${t._id}`,p=e.popper.querySelector(a);if(!p){console.error(`[GeneTooltip] CRITICAL: Ideogram container '${a}' not found.`);return}let f=Array.isArray(t.genomic_pos)?t.genomic_pos[0]:t.genomic_pos;if(!f){p.innerHTML="<small>No genomic position</small>";return}let s=String(f.chr);s.toLowerCase().startsWith("chr")&&(s=s.substring(3));let l="human";t.taxid===10090&&(l="mouse");let c={container:a,organism:l,chromosome:s,chrHeight:r.height??100,orientation:"horizontal",showBandLabels:r.showLabels??!1,annotations:[{name:t.symbol,chr:s,start:f.start,stop:f.end}]};new o(c),console.log("[GeneTooltip] Ideogram initialized.")}catch(o){console.error("[GeneTooltip] Ideogram failed to render:",o),n&&(n.innerHTML="<small>Ideogram not installed or failed to load.</small>")}}function Zr(e){return`<ul class="gene-tooltip-nested-list">${e.map(r=>`<li><a href="${r.url}" target="_blank" rel="noopener noreferrer">${r.name}</a></li>`).join("")}</ul>`}function bo(e={}){let t={...it,...e,display:{...it.display,...e.display},ideogram:{...it.ideogram,...e.ideogram},tippyOptions:{...it.tippyOptions,...e.tippyOptions}},r=zr(t.selector);r.length!==0&&(Jr(t.prefetch,r,t.prefetchThreshold),Mt(r,{...t.tippyOptions,content:"Loading...",onShow(n){let o=at(n.reference);if(!o){n.setContent("Invalid gene element");return}let{symbol:a,species:p}=o,f={truncate:t.truncateSummary,display:{...t.display,ideogram:t.ideogram?.enabled??!1},pathwaySource:t.pathwaySource,pathwayCount:t.pathwayCount,domainCount:t.domainCount},s=tr(a,p);if(typeof s<"u"){n.setContent(nr(s,f)),t.ideogram?.enabled&&s?.genomic_pos&&setTimeout(()=>{or(n,s,t.ideogram)},0);return}St([a],p).then(l=>{let c=l.get(a)||null;rr(a,p,c),n.setContent(nr(c,f)),t.ideogram?.enabled&&c?.genomic_pos&&setTimeout(()=>{or(n,c,t.ideogram)},0)}).catch(l=>{console.error(`Failed to fetch data for ${a}`,l),n.setContent("Error loading data.")})},onMount(n){let o=at(n.reference);if(!o)return;let a=tr(o.symbol,o.species);if(!a)return;n._nestedTippys=[];let p=n.popper.querySelector(`#pathways-more-${a._id}`);if(p&&a.pathway?.[t.pathwaySource]){let s=a.pathway[t.pathwaySource],l=(Array.isArray(s)?s:[s]).map(g=>{let y="#";return t.pathwaySource==="reactome"&&(y=`https://reactome.org/content/detail/${g.id}`),t.pathwaySource==="kegg"&&(y=`https://www.genome.jp/dbget-bin/www_bget?path:${g.id}`),t.pathwaySource==="wikipathways"&&(y=`https://www.wikipathways.org/pathways/${g.id}`),{name:g.name,url:y}}).sort((g,y)=>g.name.localeCompare(y.name)),c=Mt(p,{content:Zr(l),allowHTML:!0,interactive:!0,trigger:"mouseenter focus",placement:"right",theme:"light"});n._nestedTippys.push(c)}let f=n.popper.querySelector(`#domains-more-${a._id}`);if(f&&a.interpro){let s=a.interpro,l=(Array.isArray(s)?s:[s]).map(g=>({name:g.short_desc,url:`https://www.ebi.ac.uk/interpro/entry/InterPro/${g.id}`})).sort((g,y)=>g.name.localeCompare(y.name)),c=Mt(f,{content:Zr(l),allowHTML:!0,interactive:!0,trigger:"mouseenter focus",placement:"right",theme:"light"});n._nestedTippys.push(c)}},onHidden(n){n._nestedTippys&&(n._nestedTippys.forEach(o=>o.destroy()),n._nestedTippys=[])}}),Qr())}var Wp={init:bo};export{Wp as default};
